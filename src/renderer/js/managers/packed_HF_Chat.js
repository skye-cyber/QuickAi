/*! For license information please see packed_HF_Chat.js.LICENSE.txt */
(()=>{"use strict";var t,e,r,n,o={999:(t,e,r)=>{r.a(t,(async(t,e)=>{try{var n=r(981);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function f(t){return g(t)||h(t)||m(t)||p()}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t,e){if(t){if("string"==typeof t)return y(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}function h(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function g(t){if(Array.isArray(t))return y(t)}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function b(){b=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),s=new j(n||[]);return o(i,"_invoke",{value:H(t,r,s)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var p="suspendedStart",m="suspendedYield",h="executing",g="completed",y={};function v(){}function w(){}function x(){}var k={};l(k,i,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==r&&n.call(E,i)&&(k=E);var A=x.prototype=v.prototype=Object.create(k);function T(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,a,i,s){var c=f(t[o],t,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==d(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):e.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function H(e,r,n){var o=p;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===g){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var c=_(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?g:m,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=g,n.method="throw",n.arg=l.arg)}}}function _(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,_(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(d(e)+" is not iterable")}return w.prototype=x,o(A,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=l(x,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,l(t,c,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},T(L.prototype),l(L.prototype,s,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new L(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},T(A),l(A,c,"Generator"),l(A,i,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,x(n.key),n)}}function x(t){var e=k(t,"string");return"symbol"==d(e)?e:e+""}function k(t,e){if("object"!=d(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function C(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function E(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){C(a,n,o,i,s,"next",t)}function s(t){C(a,n,o,i,s,"throw",t)}i(void 0)}))}}function A(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new T(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function T(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return T=function(t){this.s=t,this.n=t.next},T.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new T(t)}var o=null;function L(){return H.apply(this,arguments)}function H(){return(H=E(b().mark((function t(){var e;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.api.getKeys("huggingface");case 2:e=t.sent,o=e.huggingfaceKey;case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}await L();var a=new n.Uy(o),i=document.getElementById("chatArea"),s=document.getElementById("model"),c=document.getElementById("AutoScroll"),l=!1;function _(t){return S.apply(this,arguments)}function S(){return(S=E(b().mark((function t(e){var r,n,o,u,d,f,p,m,h,g,y,v,w,x,k,C,E,T,L,H,_,S,j,M,I,O,N,V,P,U,z,R,q;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Reached Target: hfRoute"),r=window.InputPurify(e),n=s.value,o="msg_".concat(Math.random().toString(34).substring(3,9)),u="copy-button-".concat(Math.random().toString(36).substring(5,9)),d=document.createElement("div"),f={"Qwen/Qwen2.5-Math-1.5B":"hf-inference","Qwen/Qwen2-VL-7B-Instruct":"hyperbolic","Qwen/Qwen2.5-Coder-7B-Instruct":"nebius","Qwen/QVQ-72B-Preview":"nebius","deepseek-ai/DeepSeek-R1-Distill-Qwen-32B":"together","deepseek-ai/DeepSeek-R1":"together","meta-llama/Llama-3.2-11B-Vision-Instruct":"hf-inference"},!(["Qwen/Qwen2-VL-7B-Instruct","meta-llama/Llama-3.2-11B-Vision-Instruct","Qwen/QVQ-72B-Preview"].indexOf(n)>-1)){t.next=12;break}B(e,null,null,n,f[n]),t.next=98;break;case 12:d.innerHTML='\n\t\t\t<div data-id="'.concat(o,'" class="').concat(o,' relative bg-[#566fdb] dark:bg-[#142384] text-black dark:text-white rounded-lg rounded-br-none p-2 md:p-3 shadow-md w-fit max-w-full lg:max-w-5xl">\n\t\t\t<p class="whitespace-pre-wrap break-words max-w-xl md:max-w-2xl lg:max-w-3xl">').concat(r,'</p>\n\t\t\t<button id="').concat(u,'" class="user-copy-button absolute rounded-md px-2 py-2 right-1 bottom-0.5 bg-gradient-to-r from-indigo-400 to-pink-400 dark:from-gray-700 dark:to-gray-900 hover:bg-indigo-200 dark:hover:bg-gray-600 text-white dark:text-gray-100 rounded-lg font-semibold border border-2 cursor-pointer opacity-40 hover:opacity-80 " onclick="CopyAll(\'.').concat(o,"', this)\">\n\t\t\tCopy\n\t\t\t</button>\n\t\t\t</div>\n\t\t\t"),d.classList.add("flex","justify-end","mb-4","overflow-wrap"),i.appendChild(d),window.implementUserCopy(),i.scrollTop=i.scrollHeight,e="".concat(e," [").concat(window.electron.getDateTime()," UTC]"),window.electron.addToChat({role:"user",content:e}),(p=document.createElement("div")).innerHTML='\n\t\t\t\t<div id="loader-parent">\n\t\t\t\t<svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" class="transform scale-75">\n\t\t\t\t<circle cx="12" cy="24" r="4" class="fill-green-500">\n\t\t\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" />\n\t\t\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" />\n\t\t\t\t</circle>\n\t\t\t\t<circle cx="24" cy="24" r="4" class="fill-blue-500">\n\t\t\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" begin="-0.4s" />\n\t\t\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" begin="-0.4s" />\n\t\t\t\t</circle>\n\t\t\t\t<circle cx="36" cy="24" r="4" class="fill-yellow-500">\n\t\t\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" begin="-0.8s" />\n\t\t\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" begin="-0.8s" />\n\t\t\t\t</circle>\n\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t',m="msg_".concat(Math.random().toString(30).substring(3,9)),p.classList.add("flex","justify-start","mb-12","overflow-wrap"),i.appendChild(p),c.checked&&scrollToBottom(i),h="think-content-".concat(Math.random().toString(33).substring(3,9)),g="export-".concat(Math.random().toString(33).substring(3,9)),y=new window.Timer,t.prev=28,processing=!0,v={model:n,messages:window.electron.getChat(),max_tokens:3e3},f[n]&&(v.provider=f[n]),w=a.chatCompletionStream(v),console.log("Stream set"),x="",window.HandleProcessingEventChanges("show"),y.trackTime("start"),k="",C="",E=!1,T="",L=!1,H=!1,_=!1,t.prev=44,j=A(w);case 46:return t.next=48,j.next();case 48:if(!(H=!(M=t.sent).done)){t.next=68;break}if(I=M.value,null!=(V=null==I||null===(O=I.choices)||void 0===O?void 0:O[0])&&null!==(N=V.delta)&&void 0!==N&&N.content){t.next=53;break}return t.abrupt("continue",65);case 53:P=V.delta.content,T+=P,U=(x+=P).includes("<think>"),z="deepseek-ai/DeepSeek-R1-Distill-Qwen-32B"===n,R=!E&&(U||z),q=E&&x.includes("</think>"),R&&!L?(E=!0,L=!1,x=x.replace("<think>",""),k=x):q?(E=!1,L=!0,k+=P.replace("</think>",""),x=x.replace("</think>","")):E?k+=P:C+=P,codeBuffer&&codeBuffer.code&&(codeView.innerHTML=codeBuffer.code,canvasUpdate(),isCanvasOpen||showCanvas()),p.innerHTML='\n\t\t\t\t\t\t\t<section id="AIRes" class="relative w-fit w-full max-w-full lg:max-w-6xl mb-[2vh] p-2">\n\t\t\t\t\t\t\t'.concat(E||k?'\n\t\t\t\t\t\t\t\t<div class="think-section bg-blue-200 text-gray-800 dark:bg-[#002f42] dark:text-white rounded-lg px-4 pt-2 lg:max-w-6xl transition-colors duration-1000">\n\t\t\t\t\t\t\t\t<div class="flex items-center justify-between">\n\t\t\t\t\t\t\t\t<strong class="text-[#007bff]">Thoughts:</strong>\n\t\t\t\t\t\t\t\t<button class="text-sm text-gray-600 dark:text-gray-300" onclick="window.toggleFold(event, this.parentElement.nextElementSibling.id)">\n\t\t\t\t\t\t\t\t<p class="flex">Fold\n\t\t\t\t\t\t\t\t<svg class="mb-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" width="32" height="38" class="fold-icon">\n\t\t\t\t\t\t\t\t<path class="fill-blue-400 dark:fill-yellow-400" d="M6 9h12l-6 6z"/>\n\t\t\t\t\t\t\t\t<path fill="currentColor" d="M6 15h12l-6-6z"/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div id="'.concat(h,'" class="">\n\t\t\t\t\t\t\t\t<p style="color: #333;">').concat(window.marked(k),"</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t"):"","\n\t\t\t\t\t\t\t\t").concat(k&&C?'<p class="rounded-lg border-2 border-blue-400 dark:border-orange-400"></p>':"","\n\t\t\t\t\t\t\t\t").concat(C?'\n\t\t\t\t\t\t\t\t\t<div id="AIRes" class="'.concat(m,' max-w-full lg:max-w-6xl bg-blue-200 py-4 text-gray-800 dark:bg-[#002f42] dark:text-white rounded-lg rounded-bl-none px-4 mb-6 pb-4 transition-colors duration-1000">\n\t\t\t\t\t\t\t\t\t').concat(C&&k?'<strong class="text-[#28a745]">Response:</strong>':"",'\n\t\t\t\t\t\t\t\t\t<p class="text-[#333]">').concat(window.marked(C),'</p>\n\t\t\t\t\t\t\t\t\t<section class="options absolute bottom-2 flex mt-6 space-x-4 cursor-pointer">\n\t\t\t\t\t\t\t\t\t\t<div class="group relative max-w-fit transition-all duration-500 hover:z-50">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\trole="button"\n\t\t\t\t\t\t\t\t\t\t\t\tid="').concat(g,'"\n\t\t\t\t\t\t\t\t\t\t\t\taria-expanded="false"\n\t\t\t\t\t\t\t\t\t\t\t\tonclick="window.toggleExportOptions(this);"\n\t\t\t\t\t\t\t\t\t\t\t\taria-label="Export"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="relative overflow-hidden bg-white/80 backdrop-blur-md transition-all duration-700 hover:bg-white hover:shadow-lg hover:shadow-blue-500/10 dark:bg-[#5500ff]/80 dark:hover:bg-[#00aa00]/90 active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-900/50 rounded-full"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle="border: 2px solid rgba(255,85,0,0); background-clip: padding-box, border-box; background-origin: border-box; background-image: linear-gradient(to bottom right, hsl(0 0% 100% / 0.8), hsl(0 0% 100% / 0.8)), linear-gradient(135deg, rgba(255,0,255,170) 0%, rgba(0,0,255,85) 50%, rgba(0,255,255,170) 100%);"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="flex items-center space-x-2 px-4 py-1">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="relative h-6 w-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="absolute inset-0 h-full w-full fill-current text-blue-600 transition-all duration-700 group-hover:rotate-90 group-hover:scale-110 group-hover:text-blue-500 dark:text-[#00aaff] dark:group-hover:text-sky-800"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox="0 0 24 24"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1))"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="origin-center transition-transform duration-500"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="bg-gradient-to-r from-blue-700 to-[#550000] bg-clip-text text-sm font-semibold text-transparent transition-all duration-700 group-hover:from-blue-600 group-hover:to-blue-400 dark:from-blue-600 dark:to-[#00007f] dark:group-hover:from-sky-700 dark:group-hover:to-[#984fff]">\n\t\t\t\t\t\t\t\t\t\t\t\t\tExport\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- Gradient border overlay --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="absolute inset-0 -z-10 rounded-[12px] bg-gradient-to-br from-blue-400/20 via-purple-400/10 to-blue-400/20 opacity-60 dark:from-blue-400/15 dark:via-purple-400/10 dark:to-blue-400/15"></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- Hover enhancement effect --\x3e\n\t\t\t\t\t\t\t\t\t\t\t<div class="absolute -inset-2 -z-10 rounded-xl bg-blue-500/10 blur-xl transition-opacity duration-300 group-hover:opacity-100 dark:bg-blue-400/15"></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="rounded-lg p-1 cursor-pointer" aria-label="Copy" title="Copy" id="copy-all" onclick="CopyAll(\'.').concat(m,'\');">\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\tclass="w-5 md:w-6 h-5 md:h-6 mt-1 transition-transform duration-300 ease-in-out hover:scale-110 cursor-pointer"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox="0 0 24 24"\n\t\t\t\t\t\t\t\t\t\t\t\tfill="none"\n\t\t\t\t\t\t\t\t\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset="0%" style="stop-color: #FF4081; stop-opacity: 100" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<stop offset="100%" style="stop-color: #4a1dff; stop-opacity: 1" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</linearGradient>\n\t\t\t\t\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t\t\t\t\t<g clip-path="url(#clip0)">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill-rule="evenodd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclip-rule="evenodd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill="url(#gradient1)"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="exportOptions-').concat(g,'" class="hidden block absolute bottom-10 left-0 bg-[radial-gradient(closest-side,var(--tw-gradient-stops))] from-[#009393] dark:from-[#002f42] via-[#45cece] dark:via-[#002f42] to-blue-400 dark:to-[#002f42] dark:bg-gray-800 p-2 rounded shadow-md z-50 border border-[#0055ff] dark:border-[#009fe8] transition-colors duration-1000">\n\t\t\t\t\t\t\t\t\t<ul class="list-none p-0">\n\t\t\t\t\t\t\t\t\t<li class="mb-2">\n\t\t\t\t\t\t\t\t\t<p class="text-[#222] dark:text-blue-300 hover:text-[#8900ce] dark:hover:text-[#aaaa00] border border-blue-400/0 hover:border-[#a1a100] dark:hover:border-[#00aeff] transition-colors duration-1000 cursor-pointer" onclick="HTML2Pdf(event, \'.').concat(m,'\')">Export to PDF</p>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class="mb-2">\n\t\t\t\t\t\t\t\t\t<p class="text-[#222] dark:text-blue-300 hover:text-[#8900ce] dark:hover:text-[#aaaa00] border border-blue-400/0 hover:border-[#a1a100] dark:hover:border-[#00aeff] transition-colors duration-1000 cursor-pointer" onclick="HTML2Jpg(event, \'.').concat(m,'\')">Export to JPG</p>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<p class="text-[#222] dark:text-blue-300 hover:text-[#8900ce] dark:hover:text-[#aaaa00] border border-blue-400/0 hover:border-[#a1a100] dark:hover:border-[#00aeff] transition-all duration-1000 cursor-pointer" onclick="HTML2Word(event, \'.').concat(m,'\')">Export to DOCX</p>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<p class="cursor-not-allowed text-[#222] dark:text-blue-300 hover:text-[#8900ce] dark:hover:text-[#aaaa00] border border-blue-400/0 hover:border-[#a1a100] dark:hover:border-[#00aeff] transition-all duration-1000 decoration-underline" onclick="">Word Export Advance</p>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</section>'):"","\n\t\t\t\t\t\t\t\t\t"),c.checked&&scrollToBottom(i),window.debounceRenderKaTeX(".".concat(m),3e3,!1);case 65:H=!1,t.next=46;break;case 68:t.next=74;break;case 70:t.prev=70,t.t0=t.catch(44),_=!0,S=t.t0;case 74:if(t.prev=74,t.prev=75,!H||null==j.return){t.next=79;break}return t.next=79,j.return();case 79:if(t.prev=79,!_){t.next=82;break}throw S;case 82:return t.finish(79);case 83:return t.finish(74);case 84:processing=!1,y.trackTime("stop"),window.HandleProcessingEventChanges("hide"),!1===l&&(window.electron.send("toMain",{message:"set-Utitility-Script"}),l=!0),window.debounceRenderKaTeX(null,null,!0),normaliZeMathDisplay(".".concat(m)),window.electron.addToChat({role:"assistant",content:T}),window.handleDiagrams(C,"both"),window.LoopRenderCharts(C),t.next=98;break;case 95:t.prev=95,t.t1=t.catch(28),window.handleRequestError(t.t1,d,p);case 98:case"end":return t.stop()}}),t,null,[[28,95],[44,70,74,84],[75,,79,83]])})))).apply(this,arguments)}function B(t,e){return j.apply(this,arguments)}function j(){return j=E(b().mark((function t(e,r){var n,o,l,u,d,p,m,h,g,y,v,w,x,k,C,E,T,L,H,_,S,B,j,I=arguments;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=I.length>2&&void 0!==I[2]?I[2]:null,o=I.length>3&&void 0!==I[3]?I[3]:null,l=I.length>4&&void 0!==I[4]?I[4]:null,u=new window.Timer,processing=!0,s.value=o?o.split("/").slice(-1)[0]:"meta-llama/Llama-3.2-11B-Vision-Instruct",d="FCont_".concat(Math.random().toString(35).substring(2,8)),p=M(e,r,n,d),e="".concat(e," [").concat(window.electron.getDateTime()," UTC]"),n?"image"==r?(h=n.map((function(t){return{type:"image_url",imageUrl:{url:t}}})),m=[{type:"text",text:e}].concat(f(h))):"document"==r&&(g=n.map((function(t){return{type:"file_url",fileUrl:{url:t}}})),m=[{type:"text",text:e}].concat(f(g))):m=[{type:"text",text:e}],window.electron.addToVisionChat({role:"user",content:m}),y=document.createElement("div"),v="msg_".concat(Math.random().toString(30).substring(3,9)),y.classList.add("flex","justify-start","mb-12","overflow-wrap"),i.appendChild(y),w="export-".concat(Math.random().toString(33).substring(3,9)),y.innerHTML='\n\t\t<div id="loader-parent">\n\t\t<svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" class="transform scale-75">\n\t\t<circle cx="12" cy="24" r="4" class="fill-green-500">\n\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" />\n\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" />\n\t\t</circle>\n\t\t<circle cx="24" cy="24" r="4" class="fill-blue-500">\n\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" begin="-0.4s" />\n\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" begin="-0.4s" />\n\t\t</circle>\n\t\t<circle cx="36" cy="24" r="4" class="fill-yellow-500">\n\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" begin="-0.8s" />\n\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" begin="-0.8s" />\n\t\t</circle>\n\t\t</svg>\n\t\t</div>\n\t\t',t.prev=17,x=a.chatCompletionStream({model:o,messages:window.electron.clearImages(window.electron.getVisionChat()),max_tokens:2e3}),l&&(x.provider=l),k="",window.HandleProcessingEventChanges("show"),u.trackTime("start"),C=!1,E=!1,t.prev=25,L=A(x);case 27:return t.next=29,L.next();case 29:if(!(C=!(H=t.sent).done)){t.next=36;break}_=H.value,null!=(j=null==_||null===(S=_.choices)||void 0===S?void 0:S[0])&&null!==(B=j.delta)&&void 0!==B&&B.content&&(k+=j.delta.content,codeBuffer&&codeBuffer.code&&(codeView.innerHTML=codeBuffer.code,canvasUpdate(),isCanvasOpen||showCanvas()),y.innerHTML='\n\t\t\t\t\t<section id="AIRes" class="relative w-fit w-full max-w-full lg:max-w-6xl mb-[2vh]">\n\t\t\t\t\t<div id="AIRes" class="'.concat(v,' w-fit max-w-full lg:max-w-6xl bg-blue-200 text-gray-800 dark:bg-[#002f42] dark:text-white rounded-lg rounded-bl-none px-4 mb-6 pt-2 pb-4 w-fit max-w-full lg:max-w-6xl transition-colors duration-1000">').concat(window.marked(window.normalizeMathDelimiters(k)),'\n\t\t\t\t\t\t<section class="options absolute bottom-2 flex mt-6 space-x-4 cursor-pointer">\n\t\t\t\t\t\t\t<div class="group relative max-w-fit transition-all duration-500 hover:z-50">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\trole="button"\n\t\t\t\t\t\t\t\t\tid="').concat(w,'"\n\t\t\t\t\t\t\t\t\taria-expanded="false"\n\t\t\t\t\t\t\t\t\tonclick="window.toggleExportOptions(this);"\n\t\t\t\t\t\t\t\t\taria-label="Export"\n\t\t\t\t\t\t\t\t\tclass="relative overflow-hidden bg-white/80 backdrop-blur-md transition-all duration-700 hover:bg-white hover:shadow-lg hover:shadow-blue-500/10 dark:bg-[#5500ff]/80 dark:hover:bg-[#00aa00]/90 active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-900/50 rounded-full"\n\t\t\t\t\t\t\t\t\tstyle="border: 2px solid rgba(255,85,0,0); background-clip: padding-box, border-box; background-origin: border-box; background-image: linear-gradient(to bottom right, hsl(0 0% 100% / 0.8), hsl(0 0% 100% / 0.8)), linear-gradient(135deg, rgba(255,0,255,170) 0%, rgba(0,0,255,85) 50%, rgba(0,255,255,170) 100%);"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class="flex items-center space-x-2 px-4 py-1">\n\t\t\t\t\t\t\t\t\t<div class="relative h-6 w-6">\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\tclass="absolute inset-0 h-full w-full fill-current text-blue-600 transition-all duration-700 group-hover:rotate-90 group-hover:scale-110 group-hover:text-blue-500 dark:text-[#00aaff] dark:group-hover:text-sky-800"\n\t\t\t\t\t\t\t\t\t\tviewBox="0 0 24 24"\n\t\t\t\t\t\t\t\t\t\tstyle="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1))"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\td="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"\n\t\t\t\t\t\t\t\t\t\t\tclass="origin-center transition-transform duration-500"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="bg-gradient-to-r from-blue-700 to-[#550000] bg-clip-text text-sm font-semibold text-transparent transition-all duration-700 group-hover:from-blue-600 group-hover:to-blue-400 dark:from-blue-600 dark:to-[#00007f] dark:group-hover:from-sky-700 dark:group-hover:to-[#984fff]">\n\t\t\t\t\t\t\t\t\t\tExport\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\x3c!-- Gradient border overlay --\x3e\n\t\t\t\t\t\t\t\t\t<div class="absolute inset-0 -z-10 rounded-[12px] bg-gradient-to-br from-blue-400/20 via-purple-400/10 to-blue-400/20 opacity-60 dark:from-blue-400/15 dark:via-purple-400/10 dark:to-blue-400/15"></div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\x3c!-- Hover enhancement effect --\x3e\n\t\t\t\t\t\t\t\t<div class="absolute -inset-2 -z-10 rounded-xl bg-blue-500/10 blur-xl transition-opacity duration-500 group-hover:opacity-100 dark:bg-blue-400/15"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="rounded-lg p-1 cursor-pointer" aria-label="Copy" title="Copy" id="copy-all" onclick="CopyAll(\'.').concat(v,'\');">\n\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\tclass="w-5 md:w-6 h-5 md:h-6 mt-1 transition-transform duration-300 ease-in-out hover:scale-110 cursor-pointer"\n\t\t\t\t\t\t\t\t\tviewBox="0 0 24 24"\n\t\t\t\t\t\t\t\t\tfill="none"\n\t\t\t\t\t\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t\t\t<linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">\n\t\t\t\t\t\t\t\t\t\t\t<stop offset="0%" style="stop-color: #FF4081; stop-opacity: 100" />\n\t\t\t\t\t\t\t\t\t\t\t<stop offset="100%" style="stop-color: #4a1dff; stop-opacity: 1" />\n\t\t\t\t\t\t\t\t\t\t</linearGradient>\n\t\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t\t<g clip-path="url(#clip0)">\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tfill-rule="evenodd"\n\t\t\t\t\t\t\t\t\t\t\tclip-rule="evenodd"\n\t\t\t\t\t\t\t\t\t\t\td="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z"\n\t\t\t\t\t\t\t\t\t\t\tfill="url(#gradient1)"/>\n\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div id="exportOptions-').concat(w,'" class="hidden block absolute bottom-10 left-0 bg-[radial-gradient(closest-side,var(--tw-gradient-stops))] from-[#009393] dark:from-[#002f42] via-[#45cece] dark:via-[#002f42] to-blue-400 dark:to-[#002f42] dark:bg-gray-800 p-2 rounded shadow-md z-50 border border-[#0055ff] dark:border-[#009fe8] transition-colors duration-1000">\n\t\t\t\t\t<ul class="list-none p-0">\n\t\t\t\t\t<li class="mb-2">\n\t\t\t\t\t<p class="text-[#222] dark:text-blue-300 hover:text-[#8900ce] dark:hover:text-[#aaaa00] border border-blue-400/0 hover:border-[#a1a100] dark:hover:border-[#00aeff] transition-colors duration-1000 cursor-pointer" onclick="HTML2Pdf(event, \'.').concat(v,'\')">Export to PDF</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="mb-2">\n\t\t\t\t\t<p class="text-[#222] dark:text-blue-300 hover:text-[#8900ce] dark:hover:text-[#aaaa00] border border-blue-400/0 hover:border-[#a1a100] dark:hover:border-[#00aeff] transition-colors duration-1000 cursor-pointer" onclick="HTML2Jpg(event, \'.').concat(v,'\')">Export to JPG</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t<p class="text-[#222] dark:text-blue-300 hover:text-[#8900ce] dark:hover:text-[#aaaa00] border border-blue-400/0 hover:border-[#a1a100] dark:hover:border-[#00aeff] transition-all duration-1000 cursor-pointer" onclick="HTML2Word(event, \'.').concat(v,'\')">Export to DOCX</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t<p class="cursor-not-allowed text-[#222] dark:text-blue-300 hover:text-[#8900ce] dark:hover:text-[#aaaa00] border border-blue-400/0 hover:border-[#a1a100] dark:hover:border-[#00aeff] transition-all duration-1000 decoration-underline" onclick="">Word Export Advance</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t\t'),c.checked&&scrollToBottom(i),window.debounceRenderKaTeX(".".concat(v),3e3,!0));case 33:C=!1,t.next=27;break;case 36:t.next=42;break;case 38:t.prev=38,t.t0=t.catch(25),E=!0,T=t.t0;case 42:if(t.prev=42,t.prev=43,!C||null==L.return){t.next=47;break}return t.next=47,L.return();case 47:if(t.prev=47,!E){t.next=50;break}throw T;case 50:return t.finish(47);case 51:return t.finish(42);case 52:processing=!0,u.trackTime("stop"),window.HandleProcessingEventChanges("hide"),window.setutilityScriptisSet(),NormalizeCanvasCode(),window.debounceRenderKaTeX(null,null,!0),normaliZeMathDisplay(".".concat(v)),window.electron.addToVisionChat({role:"assistant",content:[{type:"text",text:k}]}),window.handleDiagrams(k,"both"),window.LoopRenderCharts(k),t.next=67;break;case 64:t.prev=64,t.t1=t.catch(17),window.handleRequestError(t.t1,p,y,["VS",r,d]);case 67:case"end":return t.stop()}}),t,null,[[17,64],[25,38,42,52],[43,,47,51]])}))),j.apply(this,arguments)}function M(t,e,r,n){var o="msg_".concat(Math.random().toString(35).substring(2,8)),a="copy-button-".concat(Math.random().toString(36).substring(5,9)),s=document.createElement("div");s.classList.add("flex","justify-end","mb-4");var c='\n\t\t<div data-id="'.concat(o,'" class="').concat(o,' relative bg-[#566fdb] dark:bg-[#142384] text-black dark:text-white rounded-lg rounded-br-none p-2 md:p-3 shadow-md w-fit max-w-full lg:max-w-5xl">\n\t\t<p class="whitespace-pre-wrap break-words max-w-xl md:max-w-2xl lg:max-w-3xl">').concat(window.InputPurify(t),'</p>\n\t\t<button id="').concat(a,'" class="user-copy-button absolute rounded-md px-2 py-2 right-1 bottom-0.5 bg-gradient-to-r from-indigo-400 to-pink-400 dark:from-gray-700 dark:to-gray-900 hover:bg-indigo-200 dark:hover:bg-gray-600 text-white dark:text-gray-100 rounded-lg font-semibold border border-2 cursor-pointer opacity-40 hover:opacity-80" onclick="CopyAll(\'.').concat(o,"', this, true)\">\n\t\tCopy\n\t\t</button>\n\t\t</div>\n\t\t");if(r){var l='\n\t\t\t<div id="'.concat(n,'" class="flex justify-end">\n\t\t\t<article class="flex flex-rows-1 md:flex-rows-3 bg-cyan-100 w-fit p-1 rounded-lg">\n\t\t\t').concat(r&&"image"===e?r.map((function(t){return'<img src="'.concat(t,'" alt="Uploaded Image" class="rounded-md w-14 h-14 my-auto mx-1" />')})).join(""):"document"===e?r.map((function(t){return'<div class="inline-flex items-center"><svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<path stroke-linecap="round" stroke-linejoin="round" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 16V4a2 2 0 0 1 2 2v12a2 2 0 0 0-2-2zm1-1h4v10h-4V4z"/></svg><span>'.concat(t,"</span></div>")})).join(""):"","\n\t\t\t</article>\n\t\t\t</div>\n\t\t\t"),u=document.createElement("div");u.className="flex justify-end",u.innerHTML=l,i.appendChild(u)}return s.innerHTML=c,i.appendChild(s),scrollToBottom(i),window.copyBMan(),window.implementUserCopy(),s}window.check=l;var u=function(){return t=function t(e){v(this,t),this.chatArea=e||document.getElementById("chatArea")},e=[{key:"createUserMessage",value:function(t){var e="msg_".concat(Math.random().toString(34).substring(3,9)),r="copy-button-".concat(Math.random().toString(36).substring(5,9)),n=document.createElement("div");n.innerHTML='\n\t\t<div data-id="'.concat(e,'" class="').concat(e,' relative bg-[#566fdb] dark:bg-[#142384] text-black dark:text-white rounded-lg rounded-br-none p-2 md:p-3 shadow-md w-fit max-w-full lg:max-w-5xl">\n\t\t<p class="whitespace-pre-wrap break-words max-w-xl md:max-w-2xl lg:max-w-3xl">').concat(t,'</p>\n\t\t<button id="').concat(r,'" class="user-copy-button absolute rounded-md px-2 py-2 right-1 bottom-0.5 bg-gradient-to-r from-indigo-400 to-pink-400 dark:from-gray-700 dark:to-gray-900 hover:bg-indigo-200 dark:hover:bg-gray-600 text-white dark:text-gray-100 rounded-lg font-semibold border border-2 cursor-pointer opacity-40 hover:opacity-80 " onclick="CopyAll(\'.').concat(e,"', this)\">\n\t\tCopy\n\t\t</button>\n\t\t</div>\n\t\t"),n.classList.add("flex","justify-end","mb-4","overflow-wrap"),i.appendChild(n),window.implementUserCopy(),i.scrollTop=i.scrollHeight}},{key:"errorHandler",value:(a=E(b().mark((function t(e,r){var n,o,a,i,s,c,l=this;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{console.log(e),this._Timer.trackTime("interrupt"),n=document.getElementById("errorContainer"),o=document.getElementById("errorArea"),a=document.getElementById("closeEModal"),i=document.getElementById("retryBt"),this.removeLoader(),s=i.cloneNode(!0),i.replaceWith(s),(i=document.getElementById("retryBt")).addEventListener("click",E(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l.removeLoader(),t.next=3,l.createImage(e);case 3:case"end":return t.stop()}}),t)})))),a.addEventListener("click",(function(t){if(t.stopPropagation(),l.hideErrorModal(),l.removeLoader(),"undefined"!=typeof VS_url&&VS_url&&VS_url[1]){var e=document.getElementById(VS_url[2]);e&&e.remove()}})),setTimeout((function(){n.classList.remove("hidden"),n.classList.add("left-1/2","opacity-100","pointer-events-auto")}),200),c="Failed to fetch"===r.message?"Connection Error: Check your Internet!":r.message,"[object Object]"===r.message&&(c="This model is unreachable: It might be overloaded!"),o.textContent=c}catch(t){console.error("Error handling request error:",t)}case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"hideErrorModal",value:function(){var t=document.getElementById("errorContainer");setTimeout((function(){t.classList.remove("left-1/2","-translate-x-1/2"),t.classList.add("-translate-x-full","opacity-0","pointer-events-none")}),0),setTimeout((function(){t.classList.remove("opacity-100","-translate-x-full"),t.classList.add("hidden","-translate-x-1/2")}),1e3)}},{key:"removeLoader",value:function(){var t=document.getElementById(this.loaderId);t&&t.remove()}},{key:"generateImage",value:(n=E(b().mark((function t(e){var r,n,a,i=arguments;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]&&i[1]?"https://api-inference.huggingface.co/models/black-forest-labs/FLUX.1-dev":"https://api-inference.huggingface.co/models/stabilityai/stable-diffusion-3.5-large",t.prev=2,t.next=5,fetch(r,{headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)});case 5:if(!0!==(n=t.sent).ok){t.next=15;break}return t.next=9,n.blob();case 9:if(!(a=t.sent)){t.next=12;break}return t.abrupt("return",URL.createObjectURL(a));case 12:return t.abrupt("return",null);case 15:this.errorHandler(e.inputs,new Error("Failed with status:".concat(n.status)));case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(2),console.error("Image generation error:",t.t0),this.errorHandler(e.inputs,t.t0);case 22:case"end":return t.stop()}}),t,this,[[2,18]])}))),function(t){return n.apply(this,arguments)})},{key:"createLoadingMessage",value:function(t){this.loaderId=t||null;var e=document.createElement("div");return e.innerHTML='\n\t\t<div id="'.concat(t,'" class="w-fit dark:text-gray-100 rounded-lg font-normal bg-gray-50 dark:bg-zinc-900 max-w-3xl mb-[7%] lg:mb-[5%]">\n\t\t<div class="space-x-1 flex">\n\t\t<svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" class="transform scale-75">\n\t\t<circle cx="12" cy="24" r="4" class="fill-green-500">\n\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" />\n\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" />\n\t\t</circle>\n\t\t<circle cx="24" cy="24" r="4" class="fill-blue-500">\n\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" begin="-0.4s" />\n\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" begin="-0.4s" />\n\t\t</circle>\n\t\t<circle cx="36" cy="24" r="4" class="fill-yellow-500">\n\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" begin="-0.8s" />\n\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" begin="-0.8s" />\n\t\t</circle>\n\t\t</svg>\n\t\t<span class="text-sm mt-3 text-gray-700 dark:text-gray-200">0s</span>\n\t\t</div>\n\t\t</div>'),this.chatArea.appendChild(e),this.chatArea.scrollTop=this.chatArea.scrollHeight,e}},{key:"createImage",value:(r=E(b().mark((function t(e){var r,n,o,a,i,s,c;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this._Timer=new Timer,this._Timer.trackTime("start"),console.log("Timer started"),this.createUserMessage(e),r={inputs:e.replace("/image","").trim()},n="image_".concat(Math.random().toString(36).substring(2,7)),o=this.createLoadingMessage(n),a=0,i=setInterval((function(){a++,o.querySelector("span").textContent="".concat(a,"s")}),1e3),s=document.getElementById("CModel").checked,t.next=13,this.generateImage(r,s);case 13:c=t.sent,clearInterval(i),c?(o.textContent="",o.appendChild(this.createImageElement(c))):o.innerHTML='\n\t\t\t\t<div id="'.concat(n,'" class="w-fit bg-red-400 text-gray-950 dark:bg-rose-500 rounded-lg p-2 font-normal shadow-lg dark:shadow-red-500 max-w-3xl mb-[5%]">\n\t\t\t\t<span class="text-sm text-gray-950 dark:text-black">Could not Process request!</span>\n\t\t\t\t</div>'),this._Timer.trackTime("stop"),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(0),console.error("Error handling request error:",t.t0),this.errorHandler(e,t.t0);case 23:case"end":return t.stop()}}),t,this,[[0,19]])}))),function(t){return r.apply(this,arguments)})},{key:"createImageElement",value:function(t){var e=document.createElement("div");e.className="relative mb-[5%]";var r=document.createElement("img");r.src=t,r.className="rounded-lg shadow-lg mt-4 max-w-xs cursor-pointer",r.onclick=function(){return r.requestFullscreen()},e.appendChild(r);var n=document.createElement("button");n.className="absolute flex items-center text-white rounded-bl-md bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 font-semibold py-2 px-4 focus:outline-none shadow-md w-fit h-fit bottom-0 left-0 opacity-60 hover:opacity-100";var o=document.createElement("a");o.href=t,o.download="generated_image.png",o.className="flex items-center text-white no-underline";var a=document.createElement("span");a.textContent="Download",o.appendChild(a);var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width","24"),i.setAttribute("height","24"),i.setAttribute("viewBox","0 0 24 24"),i.setAttribute("fill","none"),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.classList.add("ml-2");var s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("fill-rule","evenodd"),s.setAttribute("clip-rule","evenodd"),s.setAttribute("d","M12 21C11.7348 21 11.4804 20.8946 11.2929 20.7071L4.29289 13.7071C3.90237 13.3166 3.90237 12.6834 4.29289 12.2929C4.68342 11.9024 5.31658 11.9024 5.70711 12.2929L11 17.5858V4C11 3.44772 11.4477 3 12 3C12.5523 3 13 3.44772 13 4V17.5858L18.2929 12.2929C18.6834 11.9024 19.3166 11.9024 19.7071 12.2929C20.0976 12.6834 20.0976 13.3166 19.7071 13.7071L12.7071 20.7071C12.5196 20.8946 12.2652 21 12 21Z"),s.setAttribute("fill","currentColor"),i.appendChild(s),o.appendChild(i),n.appendChild(o),e.appendChild(n),e}}],e&&w(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,a}();window.VisionChat=B,window.routeToHf=_,window.ImageGenerator=u,e()}catch(I){e(I)}}),1)},981:(t,e,r)=>{r.d(e,{Uy:()=>X});var n=Object.defineProperty,o={};function a(t,e){const r=Array.isArray(e)?e:[e];return function(t,e){return Object.assign({},...e.map((e=>{if(void 0!==t[e])return{[e]:t[e]}})))}(t,Object.keys(t).filter((t=>{return e=t,!r.includes(e);var e})))}function i(t){return/^http(s?):/.test(t)||t.startsWith("/")}((t,e)=>{for(var r in e)n(t,r,{get:e[r],enumerable:!0})})(o,{audioClassification:()=>b,audioToAudio:()=>x,automaticSpeechRecognition:()=>v,chatCompletion:()=>D,chatCompletionStream:()=>F,documentQuestionAnswering:()=>G,featureExtraction:()=>S,fillMask:()=>B,imageClassification:()=>k,imageSegmentation:()=>C,imageToImage:()=>H,imageToText:()=>E,objectDetection:()=>A,questionAnswering:()=>j,request:()=>h,sentenceSimilarity:()=>M,streamingRequest:()=>g,summarization:()=>I,tableQuestionAnswering:()=>O,tabularClassification:()=>W,tabularRegression:()=>$,textClassification:()=>N,textGeneration:()=>P,textGenerationStream:()=>U,textToImage:()=>T,textToSpeech:()=>w,tokenClassification:()=>z,translation:()=>R,visualQuestionAnswering:()=>Q,zeroShotClassification:()=>q,zeroShotImageClassification:()=>_});var s=new Map,c=6e5,l=1e3,u="https://huggingface.co";async function d(t,e,r){if(i(t))return null;const n=`${t}:${e}`;let o=s.get(n);if(o&&o.date<new Date(Date.now()-c)&&(s.delete(n),o=void 0),void 0===o){const a=await(r?.fetch??fetch)(`${u}/api/models/${t}?expand[]=pipeline_tag`,{headers:e?{Authorization:`Bearer ${e}`}:{}}).then((t=>t.json())).then((t=>t.pipeline_tag)).catch((()=>null));if(!a)return null;o={task:a,date:new Date},s.set(n,{task:a,date:new Date}),s.size>l&&s.delete(s.keys().next().value)}return o.task}var f="https://api-inference.huggingface.co",p=null;async function m(t,e){const{accessToken:r,endpointUrl:n,...o}=t;let{model:s}=t;const{forceTask:c,includeCredentials:l,taskHint:d,wait_for_model:m,use_cache:h,dont_load_model:g,chatCompletion:y}=e??{},b={};if(r&&(b.Authorization=`Bearer ${r}`),!s&&!p&&d){const t=await fetch(`${u}/api/tasks`);t.ok&&(p=await t.json())}if(!s&&p&&d){const t=p[d];t&&(s=t.models[0].id)}if(!s)throw new Error("No model provided, and no default model found for this task");const v="data"in t&&!!t.data;v||(b["Content-Type"]="application/json"),m&&(b["X-Wait-For-Model"]="true"),!1===h&&(b["X-Use-Cache"]="false"),g&&(b["X-Load-Model"]="0");let w,x=(()=>{if(n&&i(s))throw new TypeError("Both model and endpointUrl cannot be URLs");return i(s)?(console.warn("Using a model URL is deprecated, please use the `endpointUrl` parameter instead"),s):n||(c?`${f}/pipeline/${c}/${s}`:`${f}/models/${s}`)})();return y&&!x.endsWith("/chat/completions")&&(x+="/v1/chat/completions"),"string"==typeof l?w=l:!0===l&&(w="include"),{url:x,info:{headers:b,method:"POST",body:v?t.data:JSON.stringify({...o.model&&i(o.model)?a(o,"model"):o}),...w&&{credentials:w},signal:e?.signal}}}async function h(t,e){const{url:r,info:n}=await m(t,e),o=await(e?.fetch??fetch)(r,n);if(!1!==e?.retry_on_error&&503===o.status&&!e?.wait_for_model)return h(t,{...e,wait_for_model:!0});if(!o.ok){if(o.headers.get("Content-Type")?.startsWith("application/json")){const r=await o.json();if([400,422,404,500].includes(o.status)&&e?.chatCompletion)throw new Error(`Server ${t.model} does not seem to support chat completion. Error: ${r.error}`);if(r.error)throw new Error(JSON.stringify(r.error))}throw new Error("An error occurred while fetching the blob")}return o.headers.get("Content-Type")?.startsWith("application/json")?await o.json():await o.blob()}async function*g(t,e){const{url:r,info:n}=await m({...t,stream:!0},e),o=await(e?.fetch??fetch)(r,n);if(!1!==e?.retry_on_error&&503===o.status&&!e?.wait_for_model)return yield*g(t,{...e,wait_for_model:!0});if(!o.ok){if(o.headers.get("Content-Type")?.startsWith("application/json")){const r=await o.json();if([400,422,404,500].includes(o.status)&&e?.chatCompletion)throw new Error(`Server ${t.model} does not seem to support chat completion. Error: ${r.error}`);if(r.error)throw new Error(r.error)}throw new Error(`Server response contains error: ${o.status}`)}if(!o.headers.get("content-type")?.startsWith("text/event-stream"))throw new Error("Server does not support event stream content type, it returned "+o.headers.get("content-type"));if(!o.body)return;const a=o.body.getReader();let i=[];const s=function(t){let e,r,n,o=!1;return function(a){void 0===e?(e=a,r=0,n=-1):e=function(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}(e,a);const i=e.length;let s=0;for(;r<i;){o&&(10===e[r]&&(s=++r),o=!1);let a=-1;for(;r<i&&-1===a;++r)switch(e[r]){case 58:-1===n&&(n=r-s);break;case 13:o=!0;case 10:a=r}if(-1===a)break;t(e.subarray(s,a),n),s=r,n=-1}s===i?e=void 0:0!==s&&(e=e.subarray(s),r-=s)}}(function(){let t={data:"",event:"",id:"",retry:void 0};const e=new TextDecoder;return function(r,n){if(0===r.length)o=t,i.push(o),t={data:"",event:"",id:"",retry:void 0};else if(n>0){const o=e.decode(r.subarray(0,n)),a=n+(32===r[n+1]?2:1),i=e.decode(r.subarray(a));switch(o){case"data":t.data=t.data?t.data+"\n"+i:i;break;case"event":t.event=i;break;case"id":t.id=i;break;case"retry":const e=parseInt(i,10);isNaN(e)||(t.retry=e)}}var o}}());try{for(;;){const{done:t,value:e}=await a.read();if(t)return;s(e);for(const t of i)if(t.data.length>0){if("[DONE]"===t.data)return;const e=JSON.parse(t.data);if("object"==typeof e&&null!==e&&"error"in e)throw new Error(e.error);yield e}i=[]}}finally{a.releaseLock()}}var y=class extends TypeError{constructor(t){super(`Invalid inference output: ${t}. Use the 'request' method with the same parameters to do a custom call with no type checking.`),this.name="InferenceOutputError"}};async function b(t,e){const r=await h(t,{...e,taskHint:"audio-classification"});if(!Array.isArray(r)||!r.every((t=>"string"==typeof t.label&&"number"==typeof t.score)))throw new y("Expected Array<{label: string, score: number}>");return r}async function v(t,e){const r=await h(t,{...e,taskHint:"automatic-speech-recognition"});if("string"!=typeof r?.text)throw new y("Expected {text: string}");return r}async function w(t,e){const r=await h(t,{...e,taskHint:"text-to-speech"});if(!(r&&r instanceof Blob))throw new y("Expected Blob");return r}async function x(t,e){const r=await h(t,{...e,taskHint:"audio-to-audio"});if(!Array.isArray(r)||!r.every((t=>"string"==typeof t.label&&"string"==typeof t.blob&&"string"==typeof t["content-type"])))throw new y("Expected Array<{label: string, blob: string, content-type: string}>");return r}async function k(t,e){const r=await h(t,{...e,taskHint:"image-classification"});if(!Array.isArray(r)||!r.every((t=>"string"==typeof t.label&&"number"==typeof t.score)))throw new y("Expected Array<{label: string, score: number}>");return r}async function C(t,e){const r=await h(t,{...e,taskHint:"image-segmentation"});if(!Array.isArray(r)||!r.every((t=>"string"==typeof t.label&&"string"==typeof t.mask&&"number"==typeof t.score)))throw new y("Expected Array<{label: string, mask: string, score: number}>");return r}async function E(t,e){const r=(await h(t,{...e,taskHint:"image-to-text"}))?.[0];if("string"!=typeof r?.generated_text)throw new y("Expected {generated_text: string}");return r}async function A(t,e){const r=await h(t,{...e,taskHint:"object-detection"});if(!Array.isArray(r)||!r.every((t=>"string"==typeof t.label&&"number"==typeof t.score&&"number"==typeof t.box.xmin&&"number"==typeof t.box.ymin&&"number"==typeof t.box.xmax&&"number"==typeof t.box.ymax)))throw new y("Expected Array<{label:string; score:number; box:{xmin:number; ymin:number; xmax:number; ymax:number}}>");return r}async function T(t,e){const r=await h(t,{...e,taskHint:"text-to-image"});if(!(r&&r instanceof Blob))throw new y("Expected Blob");return r}function L(t){if(globalThis.Buffer)return globalThis.Buffer.from(t).toString("base64");{const e=[];return t.forEach((t=>{e.push(String.fromCharCode(t))})),globalThis.btoa(e.join(""))}}async function H(t,e){let r;r=t.parameters?{...t,inputs:L(new Uint8Array(t.inputs instanceof ArrayBuffer?t.inputs:await t.inputs.arrayBuffer()))}:{accessToken:t.accessToken,model:t.model,data:t.inputs};const n=await h(r,{...e,taskHint:"image-to-image"});if(!(n&&n instanceof Blob))throw new y("Expected Blob");return n}async function _(t,e){const r={...t,inputs:{image:L(new Uint8Array(t.inputs.image instanceof ArrayBuffer?t.inputs.image:await t.inputs.image.arrayBuffer()))}},n=await h(r,{...e,taskHint:"zero-shot-image-classification"});if(!Array.isArray(n)||!n.every((t=>"string"==typeof t.label&&"number"==typeof t.score)))throw new y("Expected Array<{label: string, score: number}>");return n}async function S(t,e){const r=t.model?await d(t.model,t.accessToken,e):void 0,n=await h(t,{...e,taskHint:"feature-extraction",..."sentence-similarity"===r&&{forceTask:"feature-extraction"}});let o=!0;const a=(t,e,r=0)=>!(r>e)&&(t.every((t=>Array.isArray(t)))?t.every((t=>a(t,e,r+1))):t.every((t=>"number"==typeof t)));if(o=Array.isArray(n)&&a(n,3,0),!o)throw new y("Expected Array<number[][][] | number[][] | number[] | number>");return n}async function B(t,e){const r=await h(t,{...e,taskHint:"fill-mask"});if(!Array.isArray(r)||!r.every((t=>"number"==typeof t.score&&"string"==typeof t.sequence&&"number"==typeof t.token&&"string"==typeof t.token_str)))throw new y("Expected Array<{score: number, sequence: string, token: number, token_str: string}>");return r}async function j(t,e){const r=await h(t,{...e,taskHint:"question-answering"});if("object"!=typeof r||!r||"string"!=typeof r.answer||"number"!=typeof r.end||"number"!=typeof r.score||"number"!=typeof r.start)throw new y("Expected {answer: string, end: number, score: number, start: number}");return r}async function M(t,e){const r=t.model?await d(t.model,t.accessToken,e):void 0,n=await h(t,{...e,taskHint:"sentence-similarity",..."feature-extraction"===r&&{forceTask:"sentence-similarity"}});if(!Array.isArray(n)||!n.every((t=>"number"==typeof t)))throw new y("Expected number[]");return n}async function I(t,e){const r=await h(t,{...e,taskHint:"summarization"});if(!Array.isArray(r)||!r.every((t=>"string"==typeof t?.summary_text)))throw new y("Expected Array<{summary_text: string}>");return r?.[0]}async function O(t,e){const r=await h(t,{...e,taskHint:"table-question-answering"});if(!("string"==typeof r?.aggregator&&"string"==typeof r.answer&&Array.isArray(r.cells)&&r.cells.every((t=>"string"==typeof t))&&Array.isArray(r.coordinates)&&r.coordinates.every((t=>Array.isArray(t)&&t.every((t=>"number"==typeof t))))))throw new y("Expected {aggregator: string, answer: string, cells: string[], coordinates: number[][]}");return r}async function N(t,e){const r=(await h(t,{...e,taskHint:"text-classification"}))?.[0];if(!Array.isArray(r)||!r.every((t=>"string"==typeof t?.label&&"number"==typeof t.score)))throw new y("Expected Array<{label: string, score: number}>");return r}function V(t){return Array.isArray(t)?t:[t]}async function P(t,e){const r=V(await h(t,{...e,taskHint:"text-generation"}));if(!Array.isArray(r)||!r.every((t=>"string"==typeof t?.generated_text)))throw new y("Expected Array<{generated_text: string}>");return r?.[0]}async function*U(t,e){yield*g(t,{...e,taskHint:"text-generation"})}async function z(t,e){const r=V(await h(t,{...e,taskHint:"token-classification"}));if(!Array.isArray(r)||!r.every((t=>"number"==typeof t.end&&"string"==typeof t.entity_group&&"number"==typeof t.score&&"number"==typeof t.start&&"string"==typeof t.word)))throw new y("Expected Array<{end: number, entity_group: string, score: number, start: number, word: string}>");return r}async function R(t,e){const r=await h(t,{...e,taskHint:"translation"});if(!Array.isArray(r)||!r.every((t=>"string"==typeof t?.translation_text)))throw new y("Expected type Array<{translation_text: string}>");return 1===r?.length?r?.[0]:r}async function q(t,e){const r=V(await h(t,{...e,taskHint:"zero-shot-classification"}));if(!Array.isArray(r)||!r.every((t=>Array.isArray(t.labels)&&t.labels.every((t=>"string"==typeof t))&&Array.isArray(t.scores)&&t.scores.every((t=>"number"==typeof t))&&"string"==typeof t.sequence)))throw new y("Expected Array<{labels: string[], scores: number[], sequence: string}>");return r}async function D(t,e){const r=await h(t,{...e,taskHint:"text-generation",chatCompletion:!0});if("object"!=typeof r||!Array.isArray(r?.choices)||"number"!=typeof r?.created||"string"!=typeof r?.id||"string"!=typeof r?.model||"string"!=typeof r?.system_fingerprint||"object"!=typeof r?.usage)throw new y("Expected ChatCompletionOutput");return r}async function*F(t,e){yield*g(t,{...e,taskHint:"text-generation",chatCompletion:!0})}async function G(t,e){const r={...t,inputs:{question:t.inputs.question,image:L(new Uint8Array(t.inputs.image instanceof ArrayBuffer?t.inputs.image:await t.inputs.image.arrayBuffer()))}},n=V(await h(r,{...e,taskHint:"document-question-answering"}))?.[0];if("string"!=typeof n?.answer||"number"!=typeof n.end&&void 0!==n.end||"number"!=typeof n.score&&void 0!==n.score||"number"!=typeof n.start&&void 0!==n.start)throw new y("Expected Array<{answer: string, end?: number, score?: number, start?: number}>");return n}async function Q(t,e){const r={...t,inputs:{question:t.inputs.question,image:L(new Uint8Array(t.inputs.image instanceof ArrayBuffer?t.inputs.image:await t.inputs.image.arrayBuffer()))}},n=(await h(r,{...e,taskHint:"visual-question-answering"}))?.[0];if("string"!=typeof n?.answer||"number"!=typeof n.score)throw new y("Expected Array<{answer: string, score: number}>");return n}async function $(t,e){const r=await h(t,{...e,taskHint:"tabular-regression"});if(!Array.isArray(r)||!r.every((t=>"number"==typeof t)))throw new y("Expected number[]");return r}async function W(t,e){const r=await h(t,{...e,taskHint:"tabular-classification"});if(!Array.isArray(r)||!r.every((t=>"number"==typeof t)))throw new y("Expected number[]");return r}var X=class{accessToken;defaultOptions;constructor(t="",e={}){this.accessToken=t,this.defaultOptions=e;for(const[r,n]of Object.entries(o))Object.defineProperty(this,r,{enumerable:!1,value:(r,o)=>n({...r,accessToken:t},{...e,...o})})}endpoint(t){return new Z(t,this.accessToken,this.defaultOptions)}},Z=class{constructor(t,e="",r={}){for(const[n,a]of Object.entries(o))Object.defineProperty(this,n,{enumerable:!1,value:(n,o)=>a({...n,accessToken:e,endpointUrl:t},{...r,...o})})}}}},a={};function i(t){var e=a[t];if(void 0!==e)return e.exports;var r=a[t]={exports:{}};return o[t](r,r.exports,i),r.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},i.a=(o,a,i)=>{var s;i&&((s=[]).d=-1);var c,l,u,d=new Set,f=o.exports,p=new Promise(((t,e)=>{u=e,l=t}));p[e]=f,p[t]=t=>(s&&t(s),d.forEach(t),p.catch((t=>{}))),o.exports=p,a((o=>{var a;c=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[t])return o;if(o.then){var a=[];a.d=0,o.then((t=>{i[e]=t,n(a)}),(t=>{i[r]=t,n(a)}));var i={};return i[t]=t=>t(a),i}}var s={};return s[t]=t=>{},s[e]=o,s})))(o);var i=()=>c.map((t=>{if(t[r])throw t[r];return t[e]})),l=new Promise((e=>{(a=()=>e(i)).r=0;var r=t=>t!==s&&!d.has(t)&&(d.add(t),t&&!t.d&&(a.r++,t.push(a)));c.map((e=>e[t](r)))}));return a.r?l:i()}),(t=>(t?u(p[r]=t):l(f),n(s)))),s&&s.d<0&&(s.d=0)},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i(999)})();
//# sourceMappingURL=packed_HF_Chat.js.map