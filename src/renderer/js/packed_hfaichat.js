/*! For license information please see packed_hfaichat.js.LICENSE.txt */
(()=>{"use strict";var t,e,n,r,a={36127:(t,e,n)=>{n.a(t,(async(t,e)=>{try{var r=n(11981);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){var e=u(t,"string");return"symbol"==i(e)?e:e+""}function u(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function d(t){return m(t)||y(t)||p(t)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,e){if(t){if("string"==typeof t)return h(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function y(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function m(t){if(Array.isArray(t))return h(t)}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function g(){g=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var o=e&&e.prototype instanceof b?e:b,i=Object.create(o.prototype),s=new B(r||[]);return a(i,"_invoke",{value:_(t,n,s)}),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var p="suspendedStart",y="suspendedYield",m="executing",h="completed",w={};function b(){}function v(){}function x(){}var k={};u(k,s,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==n&&r.call(E,s)&&(k=E);var A=x.prototype=b.prototype=Object.create(k);function T(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function H(t,e){function n(a,o,s,c){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==i(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function _(e,n,r){var a=p;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var c=L(s,r);if(c){if(c===w)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===p)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=m;var l=f(e,n,r);if("normal"===l.type){if(a=r.done?h:y,l.arg===w)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=h,r.method="throw",r.arg=l.arg)}}}function L(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,L(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),w;var o=f(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,w;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,w):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,w)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(i(e)+" is not iterable")}return v.prototype=x,a(A,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:v,configurable:!0}),v.displayName=u(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,l,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},T(H.prototype),u(H.prototype,c,(function(){return this})),e.AsyncIterator=H,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new H(d(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},T(A),u(A,l,"Generator"),u(A,s,(function(){return this})),u(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=M,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,w):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),w}},e}function w(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){w(o,r,a,i,s,"next",t)}function s(t){w(o,r,a,i,s,"throw",t)}i(void 0)}))}}function v(t){var e,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(e=t[n]))return e.call(t);if(r&&null!=(e=t[r]))return new x(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function x(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return x=function(t){this.s=t,this.n=t.next},x.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new x(t)}var a=await window.electron.HUGGINGHUB_API_KEY();function k(t){var e=document.getElementById("chatArea"),n=document.getElementById("userInput"),r=document.getElementById("sendBtn"),a=document.getElementById("model"),i=document.getElementById("AutoScroll"),s=!1;function c(t){return l.apply(this,arguments)}function l(){return(l=b(g().mark((function n(r){var c,l,d,f,p,y,m,h,w,b,x,k,C,E,A,T,H,_,L,S,j,B,M,O,I,P,N,V,U,q,D;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=r.startsWith("/image"),l=window.escapeHTML(r),d=a.value,f="msg_".concat(Math.random().toString(34).substring(3,9)),p="copy-button-".concat(Math.random().toString(36).substring(5,9)),y=document.createElement("div"),m={"Qwen/Qwen2.5-Math-1.5B":"hf-inference","Qwen/Qwen2-VL-7B-Instruct":"hyperbolic","Qwen/Qwen2.5-Coder-7B-Instruct":"nebius","Qwen/QVQ-72B-Preview":"nebius","deepseek-ai/DeepSeek-R1-Distill-Qwen-32B":"together","deepseek-ai/DeepSeek-R1":"together","meta-llama/Llama-3.2-11B-Vision-Instruct":"hf-inference"},!(["Qwen/Qwen2-VL-7B-Instruct","meta-llama/Llama-3.2-11B-Vision-Instruct","Qwen/QVQ-72B-Preview"].indexOf(d)>-1)){n.next=12;break}u(r,null,null,d,m[d]),n.next=83;break;case 12:if(y.innerHTML='\n\t\t\t<div data-id="'.concat(f,'" class="').concat(f,' relative bg-blue-500 dark:bg-[#142384] text-black dark:text-white rounded-lg p-2 md:p-3 shadow-md w-fit max-w-full lg:max-w-5xl">\n\t\t\t<p class="whitespace-pre-wrap break-words max-w-xl md:max-w-2xl lg:max-w-3xl">').concat(l,'</p>\n\t\t\t<button id="').concat(p,'" class="user-copy-button absolute rounded-md px-2 py-2 right-1 bottom-0.5 bg-gradient-to-r from-indigo-400 to-pink-400 dark:from-gray-700 dark:to-gray-900 hover:bg-indigo-200 dark:hover:bg-gray-600 text-white dark:text-gray-100 rounded-lg font-semibold border border-2 cursor-pointer opacity-40 hover:opacity-80 " onclick="CopyAll(\'.').concat(f,"', this)\">\n\t\t\tCopy\n\t\t\t</button>\n\t\t\t</div>\n\t\t\t"),y.classList.add("flex","justify-end","mb-4","overflow-wrap"),e.appendChild(y),window.implementUserCopy(),e.scrollTop=e.scrollHeight,!c){n.next=22;break}new o(e).createImage(r),n.next=83;break;case 22:window.electron.addToChat({role:"user",content:r}),r="".concat(r," [").concat(window.electron.getDateTime()," UTC]"),(h=document.createElement("div")).innerHTML='\n\t\t\t\t<div id="loader-parent">\n\t\t\t\t<svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" class="transform scale-75">\n\t\t\t\t<circle cx="12" cy="24" r="4" class="fill-green-500">\n\t\t\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" />\n\t\t\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" />\n\t\t\t\t</circle>\n\t\t\t\t<circle cx="24" cy="24" r="4" class="fill-blue-500">\n\t\t\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" begin="-0.4s" />\n\t\t\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" begin="-0.4s" />\n\t\t\t\t</circle>\n\t\t\t\t<circle cx="36" cy="24" r="4" class="fill-yellow-500">\n\t\t\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" begin="-0.8s" />\n\t\t\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" begin="-0.8s" />\n\t\t\t\t</circle>\n\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t',w="msg_".concat(Math.random().toString(30).substring(3,9)),h.classList.add("flex","justify-start","mb-12","overflow-wrap"),e.appendChild(h),i.checked&&scrollToBottom(e),b="think-content-".concat(Math.random().toString(33).substring(3,9)),x=new window.Timer,n.prev=32,k={model:d,messages:window.electron.getChat(),max_tokens:3e3},m[d]&&(k.provider=m[d]),C=t.chatCompletionStream(k),E="",window.HandleProcessingEventChanges("show"),x.trackTime("start"),A="",T="",H=!1,_="",L=!1,S=!1,j=!1,n.prev=46,M=v(C);case 48:return n.next=50,M.next();case 50:if(!(S=!(O=n.sent).done)){n.next=57;break}I=O.value,null!=(V=null==I||null===(P=I.choices)||void 0===P?void 0:P[0])&&null!==(N=V.delta)&&void 0!==N&&N.content&&(U=V.delta.content,E+=U,_+=U,q=!(H||-1===E.indexOf("<think>")&&"deepseek-ai/DeepSeek-R1-Distill-Qwen-32B"!==d),D=!(!H||-1===E.indexOf("</think>")),q&&!L?(H=!0,E=E.replace("<think>",""),A=E):D?(H=!1,L=!0,A+=U.replace("</think>",""),E=E.replace("</think>","")):H?A+=U:T+=U,h.innerHTML='\n\t\t\t\t\t\t\t<section class="relative w-fit max-w-full lg:max-w-6xl mb-8 p-2">\n\t\t\t\t\t\t\t'.concat(H||A?'\n\t\t\t\t\t\t\t\t<div class="think-section bg-gray-200 text-gray-800 dark:bg-[#28185a] dark:text-white rounded-lg px-4 pt-2 lg:max-w-6xl">\n\t\t\t\t\t\t\t\t<div class="flex items-center justify-between">\n\t\t\t\t\t\t\t\t<strong style="color: #007bff;">Thoughts:</strong>\n\t\t\t\t\t\t\t\t<button class="text-sm text-gray-600 dark:text-gray-300" onclick="window.toggleFold(event, this.parentElement.nextElementSibling.id)">\n\t\t\t\t\t\t\t\t<p class="flex">Fold\n\t\t\t\t\t\t\t\t<svg class="mb-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" width="32" height="38" class="fold-icon">\n\t\t\t\t\t\t\t\t<path class="fill-blue-400 dark:fill-yellow-400" d="M6 9h12l-6 6z"/>\n\t\t\t\t\t\t\t\t<path fill="currentColor" d="M6 15h12l-6-6z"/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div id="'.concat(b,'" class="">\n\t\t\t\t\t\t\t\t<p style="color: #333;">').concat(marked(A),"</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t"):"","\n\t\t\t\t\t\t\t\t").concat(A&&T?'<p class="rounded-lg border-2 border-blue-400 dark:border-orange-400"></p>':"","\n\t\t\t\t\t\t\t\t").concat(T?'\n\t\t\t\t\t\t\t\t\t<div class="'.concat(w,' bg-gray-200 py-4 text-gray-800 dark:bg-[#28185a] dark:text-white rounded-lg px-4 mb-6 pb-4">\n\t\t\t\t\t\t\t\t\t').concat(T&&A?'<strong style="color: #28a745;">Response:</strong>':"",'\n\t\t\t\t\t\t\t\t\t<p style="color: #333;">').concat(marked(T),'</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<section class="options flex absolute bottom-2 left-0 space-x-4 cursor-pointer">\n\t\t\t\t\t\t\t\t\t<div class="p-1 border-none" id="exportButton" onclick="toggleExportOptions(this);" title="Export">\n\t\t\t\t\t\t\t\t\t<svg class="fill-black dark:fill-gray-700 text-gray-600 bg-[#5555ff] dark:bg-white w-6 h-6 rounded-full" viewBox="0 0 24 24">\n\t\t\t\t\t\t\t\t\t<path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="rounded-lg p-1 cursor-pointer" aria-label="Copy" title="Copy" id="copy-all" onclick="CopyAll(\'.').concat(w,'\');">\n\t\t\t\t\t\t\t\t\t<svg class="w-5 md:w-6 h-5 md:h-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t\t<path class="fill-black dark:fill-pink-300" fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z"/></path>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t<div id="exportOptions" class="hidden block absolute bottom-10 left-0 bg-white dark:bg-gray-800 p-2 rounded shadow-md z-50 transition-300">\n\t\t\t\t\t\t\t\t\t<ul class="list-none p-0">\n\t\t\t\t\t\t\t\t\t<li class="mb-2">\n\t\t\t\t\t\t\t\t\t<a href="" class="text-blue-500 dark:text-blue-400" onclick="HTML2Pdf(event, \'.').concat(w,'\')">Export to PDF</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li class="mb-2">\n\t\t\t\t\t\t\t\t\t<a href="" class="text-blue-500 dark:text-blue-400" onclick="HTML2Jpg(event, \'.').concat(w,'\')">Export to JPG</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="" class="text-blue-500 dark:text-blue-400" onclick="HTML2Word(event, \'.').concat(w,'\')">Export to DOCX</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="" class="cursor-not-allowed text-blue-500 dark:text-blue-400 decoration-underline" onclick="SuperHTML2Word(event, \'.').concat(w,"')\">Word Export Advance</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</section>"):"","\n\t\t\t\t\t\t\t\t\t"),i.checked&&scrollToBottom(e),window.addCopyListeners(),window.debounceRenderMathJax(w));case 54:S=!1,n.next=48;break;case 57:n.next=63;break;case 59:n.prev=59,n.t0=n.catch(46),j=!0,B=n.t0;case 63:if(n.prev=63,n.prev=64,!S||null==M.return){n.next=68;break}return n.next=68,M.return();case 68:if(n.prev=68,!j){n.next=71;break}throw B;case 71:return n.finish(68);case 72:return n.finish(63);case 73:x.trackTime("stop"),window.HandleProcessingEventChanges("hide"),!1===s&&(window.electron.send("toMain",{message:"set-Utitility-Script"}),s=!0),window.debounceRenderMathJax(w,0,!0),window.electron.addToChat({role:"assistant",content:_}),n.next=83;break;case 80:n.prev=80,n.t1=n.catch(32),window.handleRequestError(n.t1,y,h);case 83:case"end":return n.stop()}}),n,null,[[32,80],[46,59,63,73],[64,,68,72]])})))).apply(this,arguments)}function u(t,e){return f.apply(this,arguments)}function f(){return f=b(g().mark((function n(r,o){var c,l,u,f,y,m,h,w,b,x,k,C,E,A,T,H,_,L,S,j,B,M,O=arguments;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=O.length>2&&void 0!==O[2]?O[2]:null,l=O.length>3&&void 0!==O[3]?O[3]:null,u=O.length>4&&void 0!==O[4]?O[4]:null,f=new window.Timer,a.value=l?l.split("/").slice(-1)[0]:"meta-llama/Llama-3.2-11B-Vision-Instruct",y="FCont_".concat(Math.random().toString(35).substring(2,8)),m=p(r,o,c,y),r="".concat(r," [").concat(window.electron.getDateTime()," UTC]"),c?"image"==o?(w=c.map((function(t){return{type:"image_url",image_url:{url:t}}})),h=[{type:"text",text:r}].concat(d(w))):"document"==o&&(b=c.map((function(t){return{type:"file_url",image_url:{url:t}}})),h=[{type:"text",text:r}].concat(d(b))):h=[{type:"text",text:r}],window.electron.addToVisionChat({role:"user",content:h}),x=document.createElement("div"),k="msg_".concat(Math.random().toString(30).substring(3,9)),x.classList.add("flex","justify-start","mb-12","overflow-wrap"),e.appendChild(x),x.innerHTML='\n\t\t<div id="loader-parent">\n\t\t<svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" class="transform scale-75">\n\t\t<circle cx="12" cy="24" r="4" class="fill-green-500">\n\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" />\n\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" />\n\t\t</circle>\n\t\t<circle cx="24" cy="24" r="4" class="fill-blue-500">\n\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" begin="-0.4s" />\n\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" begin="-0.4s" />\n\t\t</circle>\n\t\t<circle cx="36" cy="24" r="4" class="fill-yellow-500">\n\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" begin="-0.8s" />\n\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" begin="-0.8s" />\n\t\t</circle>\n\t\t</svg>\n\t\t</div>\n\t\t',n.prev=15,console.log(window.electron.clearImages(window.electron.getVisionChat())),C=t.chatCompletionStream({model:l,messages:window.electron.clearImages(window.electron.getVisionChat()),max_tokens:2e3}),u&&(C.provider=u),E="",window.HandleProcessingEventChanges("show"),f.trackTime("start"),A=!1,T=!1,n.prev=24,_=v(C);case 26:return n.next=28,_.next();case 28:if(!(A=!(L=n.sent).done)){n.next=35;break}S=L.value,null!=(M=null==S||null===(j=S.choices)||void 0===j?void 0:j[0])&&null!==(B=M.delta)&&void 0!==B&&B.content&&(E+=M.delta.content,x.innerHTML='\n\t\t\t\t\t<section class="relative w-fit max-w-full lg:max-w-6xl mb-8">\n\t\t\t\t\t<div class="'.concat(k,' bg-gray-200 text-gray-800 dark:bg-[#28185a] dark:text-white rounded-lg px-4 mb-6 pt-2 pb-4 w-fit max-w-full lg:max-w-6xl">').concat(marked(E),'\n\t\t\t\t\t</div>\n\t\t\t\t\t<section class="options flex absolute bottom-2 left-0 space-x-4 cursor-pointer">\n\t\t\t\t\t<div class="p-1 border-none" id="exportButton" onclick="toggleExportOptions(this);" title="Export">\n\t\t\t\t\t<svg class="fill-black dark:fill-gray-700 text-gray-600 bg-[#5555ff] dark:bg-white w-6 h-6 rounded-full" viewBox="0 0 24 24">\n\t\t\t\t\t<path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="rounded-lg p-1 cursor-pointer" aria-label="Copy" title="Copy" id="copy-all" onclick="CopyAll(\'.').concat(k,'\');">\n\t\t\t\t\t<svg class="w-5 md:w-6 h-5 md:h-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t<path class="fill-black dark:fill-pink-300" fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z"></path>\n\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\n\t\t\t\t\t<div id="exportOptions" class="hidden block absolute bottom-10 left-0 bg-white dark:bg-gray-800 p-2 rounded shadow-md z-50 transition-300">\n\n\t\t\t\t\t<ul class="list-none p-0">\n\t\t\t\t\t<li class="mb-2">\n\t\t\t\t\t<a href="" class="text-blue-500 dark:text-blue-400" onclick="HTML2Pdf(event, \'.').concat(k,'\')">1. Export to PDF</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="mb-2">\n\t\t\t\t\t<a href="" class="text-blue-500 dark:text-blue-400" onclick="HTML2Jpg(event, \'.').concat(k,'\')">2. Export to JPG</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t<a href="" class="text-blue-500 dark:text-blue-400" onclick="HTML2Word(event, \'.').concat(k,'\')">3. Export to DOCX</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t<a href="" class="text-blue-500 dark:text-blue-400 decoration-underline" onclick="SuperHTML2Word(event, \'.').concat(k,"')\">4. Word Export Advance</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t\t"),i.checked&&scrollToBottom(e),window.addCopyListeners(),window.debounceRenderMathJax(k));case 32:A=!1,n.next=26;break;case 35:n.next=41;break;case 37:n.prev=37,n.t0=n.catch(24),T=!0,H=n.t0;case 41:if(n.prev=41,n.prev=42,!A||null==_.return){n.next=46;break}return n.next=46,_.return();case 46:if(n.prev=46,!T){n.next=49;break}throw H;case 49:return n.finish(46);case 50:return n.finish(41);case 51:f.trackTime("stop"),window.HandleProcessingEventChanges("hide"),!1===s&&(window.electron.send("ready_4_utility"),s=!0),window.debounceRenderMathJax(k,0,!0),window.electron.addToVisionChat({role:"assistant",content:[{type:"text",text:E}]}),n.next=61;break;case 58:n.prev=58,n.t1=n.catch(15),window.handleRequestError(n.t1,m,x,["VS",o,y]);case 61:case"end":return n.stop()}}),n,null,[[15,58],[24,37,41,51],[42,,46,50]])}))),f.apply(this,arguments)}function p(t,n,r,a){var o="msg_".concat(Math.random().toString(35).substring(2,8)),i="copy-button-".concat(Math.random().toString(36).substring(5,9)),s=document.createElement("div");s.classList.add("flex","justify-end","mb-4");var c='\n\t\t<div data-id="'.concat(o,'" class="').concat(o,' relative bg-blue-500 dark:bg-[#142384] text-black dark:text-white rounded-lg p-2 md:p-3 shadow-md w-fit max-w-full lg:max-w-5xl">\n\t\t<p class="whitespace-pre-wrap break-words max-w-xl md:max-w-2xl lg:max-w-3xl">').concat(window.escapeHTML(t),'</p>\n\t\t<button id="').concat(i,'" class="user-copy-button absolute rounded-md px-2 py-2 right-1 bottom-0.5 bg-gradient-to-r from-indigo-400 to-pink-400 dark:from-gray-700 dark:to-gray-900 hover:bg-indigo-200 dark:hover:bg-gray-600 text-white dark:text-gray-100 rounded-lg font-semibold border border-2 cursor-pointer opacity-40 hover:opacity-80" onclick="CopyAll(\'.').concat(o,"', this)\">\n\t\tCopy\n\t\t</button>\n\t\t</div>\n\t\t");if(r){var l='\n\t\t\t<div id="'.concat(a,'" class="flex justify-end">\n\t\t\t<article class="flex flex-rows-1 md:flex-rows-3 bg-cyan-100 w-fit p-1 rounded-lg">\n\t\t\t').concat(r&&"image"===n?r.map((function(t){return'<img src="'.concat(t,'" alt="Uploaded Image" class="rounded-md w-14 h-14 my-auto mx-1" />')})).join(""):"document"===n?r.map((function(t){return'<div class="inline-flex items-center"><svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<path stroke-linecap="round" stroke-linejoin="round" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 16V4a2 2 0 0 1 2 2v12a2 2 0 0 0-2-2zm1-1h4v10h-4V4z"/></svg><span>'.concat(t,"</span></div>")})).join(""):"","\n\t\t\t</article>\n\t\t\t</div>\n\t\t\t"),u=document.createElement("div");u.className="flex justify-end",u.innerHTML=l,e.appendChild(u)}return s.innerHTML=c,e.appendChild(s),scrollToBottom(e),window.copyBMan(),window.implementUserCopy(),s}window.check=s,document.addEventListener("imageLoaded",(function(t){var e=t.detail.fileDataUrl;u(t.detail.text,t.detail.fileType,e)})),r.addEventListener("click",(function(){var t=n.textContent.trim();t&&(n.textContent="",n.style.height="auto",n.style.height=Math.min(n.scrollHeight,28*window.innerHeight/100)+"px",n.scrollTop=n.scrollHeight,c(t),document.getElementById("suggestions").classList.add("hidden"))})),n.addEventListener("keydown",(function(t){if(1==!r.classList.contains("hidden")&&"Enter"===t.key&&!t.shiftKey){t.preventDefault();var e=n.textContent.trim();e&&(n.textContent="",n.style.height="auto",n.style.height=Math.min(n.scrollHeight,28*window.innerHeight/100)+"px",n.scrollTop=n.scrollHeight,c(e),document.getElementById("suggestions")&&document.getElementById("suggestions").classList.add("hidden"))}}))}k(new r.Uy(a));var o=function(){return t=function t(e){s(this,t),this.chatArea=e},e=[{key:"generateImage",value:(r=b(g().mark((function t(e){var n,r,a,o=arguments;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1]?"https://api-inference.huggingface.co/models/black-forest-labs/FLUX.1-dev":"https://api-inference.huggingface.co/models/stabilityai/stable-diffusion-3.5-large",t.prev=2,t.next=5,fetch(n,{headers:{Authorization:"Bearer ".concat(null),"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)});case 5:return r=t.sent,t.next=8,r.blob();case 8:return a=t.sent,t.abrupt("return",URL.createObjectURL(a));case 12:return t.prev=12,t.t0=t.catch(2),console.error("Image generation error:",t.t0),t.abrupt("return",null);case 16:case"end":return t.stop()}}),t,null,[[2,12]])}))),function(t){return r.apply(this,arguments)})},{key:"createLoadingMessage",value:function(t){var e=document.createElement("div");return e.innerHTML='\n\t\t<div id="'.concat(t,'" class="w-fit dark:text-gray-100 rounded-lg font-normal bg-gray-50 dark:bg-zinc-900 max-w-3xl mb-[7%] lg:mb-[5%]">\n\t\t<div class="space-x-1 flex">\n\t\t<svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" class="transform scale-75">\n\t\t<circle cx="12" cy="24" r="4" class="fill-green-500">\n\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" />\n\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" />\n\t\t</circle>\n\t\t<circle cx="24" cy="24" r="4" class="fill-blue-500">\n\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" begin="-0.4s" />\n\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" begin="-0.4s" />\n\t\t</circle>\n\t\t<circle cx="36" cy="24" r="4" class="fill-yellow-500">\n\t\t<animate attributeName="cy" values="24;10;24;38;24" keyTimes="0;0.2;0.5;0.8;1" dur="1s" repeatCount="indefinite" begin="-0.8s" />\n\t\t<animate attributeName="fill-opacity" values="1;.2;1" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite" begin="-0.8s" />\n\t\t</circle>\n\t\t</svg>\n\t\t<span class="text-sm mt-3 text-gray-700 dark:text-gray-200">0s</span>\n\t\t</div>\n\t\t</div>'),this.chatArea.appendChild(e),this.chatArea.scrollTop=this.chatArea.scrollHeight,e}},{key:"createImage",value:(n=b(g().mark((function t(e){var n,r,a,o,i,s,c;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={inputs:e.replace("/image","").trim()},r="image_".concat(Math.random().toString(36).substring(2,7)),a=this.createLoadingMessage(r),o=0,i=setInterval((function(){o++,a.querySelector("span").textContent="".concat(o,"s")}),1e3),s=document.getElementById("CModel").checked,t.next=8,this.generateImage(n,s);case 8:c=t.sent,clearInterval(i),a.innerHTML=c?this.createImageElement(c):'\n\t\t\t<div id="'.concat(r,'" class="w-fit bg-red-400 text-gray-950 dark:bg-rose-500 rounded-lg p-2 font-normal shadow-lg dark:shadow-red-500 max-w-3xl mb-[5%]">\n\t\t\t<span class="text-sm text-gray-950 dark:text-black">Could not Process request!⚠️</span>\n\t\t\t</div>');case 11:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"createImageElement",value:function(t){return'\n\t\t<div class="relative mb-[5%]">\n\t\t<img src="'.concat(t,'" class="rounded-lg shadow-lg mt-4 max-w-xs cursor-pointer" onclick="this.requestFullscreen()"/>\n\t\t<button class="absolute flex items-center text-white rounded-bl-md bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 font-semibold py-2 px-4 focus:outline-none shadow-md w-fit h-fit bottom-0 left-0 opacity-60 hover:opacity-100">\n\t\t<a href="').concat(t,'" download="generated_image.png" class="flex items-center text-white no-underline">\n\t\t<span>Download</span>\n\t\t<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="ml-2">\n\t\t<path fill-rule="evenodd" clip-rule="evenodd" d="M12 21C11.7348 21 11.4804 20.8946 11.2929 20.7071L4.29289 13.7071C3.90237 13.3166 3.90237 12.6834 4.29289 12.2929C4.68342 11.9024 5.31658 11.9024 5.70711 12.2929L11 17.5858V4C11 3.44772 11.4477 3 12 3C12.5523 3 13 3.44772 13 4V17.5858L18.2929 12.2929C18.6834 11.9024 19.3166 11.9024 19.7071 12.2929C20.0976 12.6834 20.0976 13.3166 19.7071 13.7071L12.7071 20.7071C12.5196 20.8946 12.2652 21 12 21Z" fill="currentColor"></path>\n\t\t</svg>\n\t\t</a>\n\t\t</button>\n\t\t</div>')}}],e&&c(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();e()}catch(C){e(C)}}),1)},11981:(t,e,n)=>{n.d(e,{Uy:()=>J});var r=Object.defineProperty,a={};function o(t,e){const n=Array.isArray(e)?e:[e];return function(t,e){return Object.assign({},...e.map((e=>{if(void 0!==t[e])return{[e]:t[e]}})))}(t,Object.keys(t).filter((t=>{return e=t,!n.includes(e);var e})))}function i(t){return/^http(s?):/.test(t)||t.startsWith("/")}((t,e)=>{for(var n in e)r(t,n,{get:e[n],enumerable:!0})})(a,{audioClassification:()=>w,audioToAudio:()=>x,automaticSpeechRecognition:()=>b,chatCompletion:()=>Q,chatCompletionStream:()=>$,documentQuestionAnswering:()=>R,featureExtraction:()=>S,fillMask:()=>j,imageClassification:()=>k,imageSegmentation:()=>C,imageToImage:()=>_,imageToText:()=>E,objectDetection:()=>A,questionAnswering:()=>B,request:()=>m,sentenceSimilarity:()=>M,streamingRequest:()=>h,summarization:()=>O,tableQuestionAnswering:()=>I,tabularClassification:()=>F,tabularRegression:()=>W,textClassification:()=>P,textGeneration:()=>V,textGenerationStream:()=>U,textToImage:()=>T,textToSpeech:()=>v,tokenClassification:()=>q,translation:()=>D,visualQuestionAnswering:()=>G,zeroShotClassification:()=>z,zeroShotImageClassification:()=>L});var s=new Map,c=6e5,l=1e3,u="https://huggingface.co";async function d(t,e,n){if(i(t))return null;const r=`${t}:${e}`;let a=s.get(r);if(a&&a.date<new Date(Date.now()-c)&&(s.delete(r),a=void 0),void 0===a){const o=await(n?.fetch??fetch)(`${u}/api/models/${t}?expand[]=pipeline_tag`,{headers:e?{Authorization:`Bearer ${e}`}:{}}).then((t=>t.json())).then((t=>t.pipeline_tag)).catch((()=>null));if(!o)return null;a={task:o,date:new Date},s.set(r,{task:o,date:new Date}),s.size>l&&s.delete(s.keys().next().value)}return a.task}var f="https://api-inference.huggingface.co",p=null;async function y(t,e){const{accessToken:n,endpointUrl:r,...a}=t;let{model:s}=t;const{forceTask:c,includeCredentials:l,taskHint:d,wait_for_model:y,use_cache:m,dont_load_model:h,chatCompletion:g}=e??{},w={};if(n&&(w.Authorization=`Bearer ${n}`),!s&&!p&&d){const t=await fetch(`${u}/api/tasks`);t.ok&&(p=await t.json())}if(!s&&p&&d){const t=p[d];t&&(s=t.models[0].id)}if(!s)throw new Error("No model provided, and no default model found for this task");const b="data"in t&&!!t.data;b||(w["Content-Type"]="application/json"),y&&(w["X-Wait-For-Model"]="true"),!1===m&&(w["X-Use-Cache"]="false"),h&&(w["X-Load-Model"]="0");let v,x=(()=>{if(r&&i(s))throw new TypeError("Both model and endpointUrl cannot be URLs");return i(s)?(console.warn("Using a model URL is deprecated, please use the `endpointUrl` parameter instead"),s):r||(c?`${f}/pipeline/${c}/${s}`:`${f}/models/${s}`)})();return g&&!x.endsWith("/chat/completions")&&(x+="/v1/chat/completions"),"string"==typeof l?v=l:!0===l&&(v="include"),{url:x,info:{headers:w,method:"POST",body:b?t.data:JSON.stringify({...a.model&&i(a.model)?o(a,"model"):a}),...v&&{credentials:v},signal:e?.signal}}}async function m(t,e){const{url:n,info:r}=await y(t,e),a=await(e?.fetch??fetch)(n,r);if(!1!==e?.retry_on_error&&503===a.status&&!e?.wait_for_model)return m(t,{...e,wait_for_model:!0});if(!a.ok){if(a.headers.get("Content-Type")?.startsWith("application/json")){const n=await a.json();if([400,422,404,500].includes(a.status)&&e?.chatCompletion)throw new Error(`Server ${t.model} does not seem to support chat completion. Error: ${n.error}`);if(n.error)throw new Error(JSON.stringify(n.error))}throw new Error("An error occurred while fetching the blob")}return a.headers.get("Content-Type")?.startsWith("application/json")?await a.json():await a.blob()}async function*h(t,e){const{url:n,info:r}=await y({...t,stream:!0},e),a=await(e?.fetch??fetch)(n,r);if(!1!==e?.retry_on_error&&503===a.status&&!e?.wait_for_model)return yield*h(t,{...e,wait_for_model:!0});if(!a.ok){if(a.headers.get("Content-Type")?.startsWith("application/json")){const n=await a.json();if([400,422,404,500].includes(a.status)&&e?.chatCompletion)throw new Error(`Server ${t.model} does not seem to support chat completion. Error: ${n.error}`);if(n.error)throw new Error(n.error)}throw new Error(`Server response contains error: ${a.status}`)}if(!a.headers.get("content-type")?.startsWith("text/event-stream"))throw new Error("Server does not support event stream content type, it returned "+a.headers.get("content-type"));if(!a.body)return;const o=a.body.getReader();let i=[];const s=function(t){let e,n,r,a=!1;return function(o){void 0===e?(e=o,n=0,r=-1):e=function(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}(e,o);const i=e.length;let s=0;for(;n<i;){a&&(10===e[n]&&(s=++n),a=!1);let o=-1;for(;n<i&&-1===o;++n)switch(e[n]){case 58:-1===r&&(r=n-s);break;case 13:a=!0;case 10:o=n}if(-1===o)break;t(e.subarray(s,o),r),s=n,r=-1}s===i?e=void 0:0!==s&&(e=e.subarray(s),n-=s)}}(function(){let t={data:"",event:"",id:"",retry:void 0};const e=new TextDecoder;return function(n,r){if(0===n.length)a=t,i.push(a),t={data:"",event:"",id:"",retry:void 0};else if(r>0){const a=e.decode(n.subarray(0,r)),o=r+(32===n[r+1]?2:1),i=e.decode(n.subarray(o));switch(a){case"data":t.data=t.data?t.data+"\n"+i:i;break;case"event":t.event=i;break;case"id":t.id=i;break;case"retry":const e=parseInt(i,10);isNaN(e)||(t.retry=e)}}var a}}());try{for(;;){const{done:t,value:e}=await o.read();if(t)return;s(e);for(const t of i)if(t.data.length>0){if("[DONE]"===t.data)return;const e=JSON.parse(t.data);if("object"==typeof e&&null!==e&&"error"in e)throw new Error(e.error);yield e}i=[]}}finally{o.releaseLock()}}var g=class extends TypeError{constructor(t){super(`Invalid inference output: ${t}. Use the 'request' method with the same parameters to do a custom call with no type checking.`),this.name="InferenceOutputError"}};async function w(t,e){const n=await m(t,{...e,taskHint:"audio-classification"});if(!Array.isArray(n)||!n.every((t=>"string"==typeof t.label&&"number"==typeof t.score)))throw new g("Expected Array<{label: string, score: number}>");return n}async function b(t,e){const n=await m(t,{...e,taskHint:"automatic-speech-recognition"});if("string"!=typeof n?.text)throw new g("Expected {text: string}");return n}async function v(t,e){const n=await m(t,{...e,taskHint:"text-to-speech"});if(!(n&&n instanceof Blob))throw new g("Expected Blob");return n}async function x(t,e){const n=await m(t,{...e,taskHint:"audio-to-audio"});if(!Array.isArray(n)||!n.every((t=>"string"==typeof t.label&&"string"==typeof t.blob&&"string"==typeof t["content-type"])))throw new g("Expected Array<{label: string, blob: string, content-type: string}>");return n}async function k(t,e){const n=await m(t,{...e,taskHint:"image-classification"});if(!Array.isArray(n)||!n.every((t=>"string"==typeof t.label&&"number"==typeof t.score)))throw new g("Expected Array<{label: string, score: number}>");return n}async function C(t,e){const n=await m(t,{...e,taskHint:"image-segmentation"});if(!Array.isArray(n)||!n.every((t=>"string"==typeof t.label&&"string"==typeof t.mask&&"number"==typeof t.score)))throw new g("Expected Array<{label: string, mask: string, score: number}>");return n}async function E(t,e){const n=(await m(t,{...e,taskHint:"image-to-text"}))?.[0];if("string"!=typeof n?.generated_text)throw new g("Expected {generated_text: string}");return n}async function A(t,e){const n=await m(t,{...e,taskHint:"object-detection"});if(!Array.isArray(n)||!n.every((t=>"string"==typeof t.label&&"number"==typeof t.score&&"number"==typeof t.box.xmin&&"number"==typeof t.box.ymin&&"number"==typeof t.box.xmax&&"number"==typeof t.box.ymax)))throw new g("Expected Array<{label:string; score:number; box:{xmin:number; ymin:number; xmax:number; ymax:number}}>");return n}async function T(t,e){const n=await m(t,{...e,taskHint:"text-to-image"});if(!(n&&n instanceof Blob))throw new g("Expected Blob");return n}function H(t){if(globalThis.Buffer)return globalThis.Buffer.from(t).toString("base64");{const e=[];return t.forEach((t=>{e.push(String.fromCharCode(t))})),globalThis.btoa(e.join(""))}}async function _(t,e){let n;n=t.parameters?{...t,inputs:H(new Uint8Array(t.inputs instanceof ArrayBuffer?t.inputs:await t.inputs.arrayBuffer()))}:{accessToken:t.accessToken,model:t.model,data:t.inputs};const r=await m(n,{...e,taskHint:"image-to-image"});if(!(r&&r instanceof Blob))throw new g("Expected Blob");return r}async function L(t,e){const n={...t,inputs:{image:H(new Uint8Array(t.inputs.image instanceof ArrayBuffer?t.inputs.image:await t.inputs.image.arrayBuffer()))}},r=await m(n,{...e,taskHint:"zero-shot-image-classification"});if(!Array.isArray(r)||!r.every((t=>"string"==typeof t.label&&"number"==typeof t.score)))throw new g("Expected Array<{label: string, score: number}>");return r}async function S(t,e){const n=t.model?await d(t.model,t.accessToken,e):void 0,r=await m(t,{...e,taskHint:"feature-extraction",..."sentence-similarity"===n&&{forceTask:"feature-extraction"}});let a=!0;const o=(t,e,n=0)=>!(n>e)&&(t.every((t=>Array.isArray(t)))?t.every((t=>o(t,e,n+1))):t.every((t=>"number"==typeof t)));if(a=Array.isArray(r)&&o(r,3,0),!a)throw new g("Expected Array<number[][][] | number[][] | number[] | number>");return r}async function j(t,e){const n=await m(t,{...e,taskHint:"fill-mask"});if(!Array.isArray(n)||!n.every((t=>"number"==typeof t.score&&"string"==typeof t.sequence&&"number"==typeof t.token&&"string"==typeof t.token_str)))throw new g("Expected Array<{score: number, sequence: string, token: number, token_str: string}>");return n}async function B(t,e){const n=await m(t,{...e,taskHint:"question-answering"});if("object"!=typeof n||!n||"string"!=typeof n.answer||"number"!=typeof n.end||"number"!=typeof n.score||"number"!=typeof n.start)throw new g("Expected {answer: string, end: number, score: number, start: number}");return n}async function M(t,e){const n=t.model?await d(t.model,t.accessToken,e):void 0,r=await m(t,{...e,taskHint:"sentence-similarity",..."feature-extraction"===n&&{forceTask:"sentence-similarity"}});if(!Array.isArray(r)||!r.every((t=>"number"==typeof t)))throw new g("Expected number[]");return r}async function O(t,e){const n=await m(t,{...e,taskHint:"summarization"});if(!Array.isArray(n)||!n.every((t=>"string"==typeof t?.summary_text)))throw new g("Expected Array<{summary_text: string}>");return n?.[0]}async function I(t,e){const n=await m(t,{...e,taskHint:"table-question-answering"});if(!("string"==typeof n?.aggregator&&"string"==typeof n.answer&&Array.isArray(n.cells)&&n.cells.every((t=>"string"==typeof t))&&Array.isArray(n.coordinates)&&n.coordinates.every((t=>Array.isArray(t)&&t.every((t=>"number"==typeof t))))))throw new g("Expected {aggregator: string, answer: string, cells: string[], coordinates: number[][]}");return n}async function P(t,e){const n=(await m(t,{...e,taskHint:"text-classification"}))?.[0];if(!Array.isArray(n)||!n.every((t=>"string"==typeof t?.label&&"number"==typeof t.score)))throw new g("Expected Array<{label: string, score: number}>");return n}function N(t){return Array.isArray(t)?t:[t]}async function V(t,e){const n=N(await m(t,{...e,taskHint:"text-generation"}));if(!Array.isArray(n)||!n.every((t=>"string"==typeof t?.generated_text)))throw new g("Expected Array<{generated_text: string}>");return n?.[0]}async function*U(t,e){yield*h(t,{...e,taskHint:"text-generation"})}async function q(t,e){const n=N(await m(t,{...e,taskHint:"token-classification"}));if(!Array.isArray(n)||!n.every((t=>"number"==typeof t.end&&"string"==typeof t.entity_group&&"number"==typeof t.score&&"number"==typeof t.start&&"string"==typeof t.word)))throw new g("Expected Array<{end: number, entity_group: string, score: number, start: number, word: string}>");return n}async function D(t,e){const n=await m(t,{...e,taskHint:"translation"});if(!Array.isArray(n)||!n.every((t=>"string"==typeof t?.translation_text)))throw new g("Expected type Array<{translation_text: string}>");return 1===n?.length?n?.[0]:n}async function z(t,e){const n=N(await m(t,{...e,taskHint:"zero-shot-classification"}));if(!Array.isArray(n)||!n.every((t=>Array.isArray(t.labels)&&t.labels.every((t=>"string"==typeof t))&&Array.isArray(t.scores)&&t.scores.every((t=>"number"==typeof t))&&"string"==typeof t.sequence)))throw new g("Expected Array<{labels: string[], scores: number[], sequence: string}>");return n}async function Q(t,e){const n=await m(t,{...e,taskHint:"text-generation",chatCompletion:!0});if("object"!=typeof n||!Array.isArray(n?.choices)||"number"!=typeof n?.created||"string"!=typeof n?.id||"string"!=typeof n?.model||"string"!=typeof n?.system_fingerprint||"object"!=typeof n?.usage)throw new g("Expected ChatCompletionOutput");return n}async function*$(t,e){yield*h(t,{...e,taskHint:"text-generation",chatCompletion:!0})}async function R(t,e){const n={...t,inputs:{question:t.inputs.question,image:H(new Uint8Array(t.inputs.image instanceof ArrayBuffer?t.inputs.image:await t.inputs.image.arrayBuffer()))}},r=N(await m(n,{...e,taskHint:"document-question-answering"}))?.[0];if("string"!=typeof r?.answer||"number"!=typeof r.end&&void 0!==r.end||"number"!=typeof r.score&&void 0!==r.score||"number"!=typeof r.start&&void 0!==r.start)throw new g("Expected Array<{answer: string, end?: number, score?: number, start?: number}>");return r}async function G(t,e){const n={...t,inputs:{question:t.inputs.question,image:H(new Uint8Array(t.inputs.image instanceof ArrayBuffer?t.inputs.image:await t.inputs.image.arrayBuffer()))}},r=(await m(n,{...e,taskHint:"visual-question-answering"}))?.[0];if("string"!=typeof r?.answer||"number"!=typeof r.score)throw new g("Expected Array<{answer: string, score: number}>");return r}async function W(t,e){const n=await m(t,{...e,taskHint:"tabular-regression"});if(!Array.isArray(n)||!n.every((t=>"number"==typeof t)))throw new g("Expected number[]");return n}async function F(t,e){const n=await m(t,{...e,taskHint:"tabular-classification"});if(!Array.isArray(n)||!n.every((t=>"number"==typeof t)))throw new g("Expected number[]");return n}var J=class{accessToken;defaultOptions;constructor(t="",e={}){this.accessToken=t,this.defaultOptions=e;for(const[n,r]of Object.entries(a))Object.defineProperty(this,n,{enumerable:!1,value:(n,a)=>r({...n,accessToken:t},{...e,...a})})}endpoint(t){return new Z(t,this.accessToken,this.defaultOptions)}},Z=class{constructor(t,e="",n={}){for(const[r,o]of Object.entries(a))Object.defineProperty(this,r,{enumerable:!1,value:(r,a)=>o({...r,accessToken:e,endpointUrl:t},{...n,...a})})}}}},o={};function i(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={exports:{}};return a[t](n,n.exports,i),n.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},i.a=(a,o,i)=>{var s;i&&((s=[]).d=-1);var c,l,u,d=new Set,f=a.exports,p=new Promise(((t,e)=>{u=e,l=t}));p[e]=f,p[t]=t=>(s&&t(s),d.forEach(t),p.catch((t=>{}))),a.exports=p,o((a=>{var o;c=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[t])return a;if(a.then){var o=[];o.d=0,a.then((t=>{i[e]=t,r(o)}),(t=>{i[n]=t,r(o)}));var i={};return i[t]=t=>t(o),i}}var s={};return s[t]=t=>{},s[e]=a,s})))(a);var i=()=>c.map((t=>{if(t[n])throw t[n];return t[e]})),l=new Promise((e=>{(o=()=>e(i)).r=0;var n=t=>t!==s&&!d.has(t)&&(d.add(t),t&&!t.d&&(o.r++,t.push(o)));c.map((e=>e[t](n)))}));return o.r?l:i()}),(t=>(t?u(p[n]=t):l(f),r(s)))),s&&s.d<0&&(s.d=0)},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i(36127)})();
//# sourceMappingURL=packed_hfaichat.js.map