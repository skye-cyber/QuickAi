(()=>{var e=document.getElementById("fileInput"),t=document.getElementById("dropZone"),n=document.getElementById("dropZoneModal"),d=(document.getElementById("dropZoneText"),document.getElementById("uploadedFiles")),a=document.getElementById("AttachFiles"),o=document.getElementById("imagePrompt"),s=document.getElementById("submitImage");function i(){n.classList.add("hidden"),e.value="",o.value="",d.innerHTML='<span class="font-bold text-cyan-600 dark:text-teal-400">No files uploaded yet.</span>'}function l(e){for(var t=document.getElementById("uploadedFiles"),n=0,a=!1,o=[],s=0;s<e.length;s++){var i=e[s],l=i.type.startsWith("image/"),r=l?"image":"document";if(window.fileType=r,l){a||(d.innerHTML="",a=!0),n+=1,console.log("File uploaded:",i.name,i.type,i.size),document.getElementById("dropZoneSVG").classList.add("hidden");var c=document.createElement("div");c.className="flex items-center justify-between px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg",c.innerHTML='\n                      <div class="flex items-center overflow-auto scrollbar-hide p-4 w-full">\n                          <svg class="fill-current h-6 w-6 text-gray-500 mr-1" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">\n                              <path d="M9 2a2 2 0 00-2 2v8a2 2 0 002 2h2v4a2 2 0 002 2h2a2 2 0 002-2v-4h2a2 2 0 002-2V4a2 2 0 00-2-2H9z"></path>\n                          </svg>\n                          <p class="flex text-gray-800 dark:text-stone-300 w-full text-ellipsis whitespace-nowrap">'.concat(i.name,'</p>\n                      </div>\n                      <span class="p-1 border-l border-bg-stone-400 rounded-md bg-blue-400 dark:bg-stone-300 text-gray-700 dark:text-zinc-950">').concat((i.size/1048576).toFixed(2)," MB</span>\n                  "),t.appendChild(c);var u=new FileReader;window.AllfileTypes=r,u.onload=function(e){var t=e.target.result;o.push(t)},u.readAsDataURL(i)}else window.displayStatus("Unsupported files were ignored!","success"),setTimeout((function(){window.hideStatus("success")}),3e3)}window.fileDataUrl=o,n>0&&(document.getElementById("dropZoneText").textContent="".concat(n," File(s) uploaded successfully"))}function r(){var e=window.fileDataUrl,t=window.AllfileTypes,n=o.value;if(e&&n){var d=new CustomEvent("imageLoaded",{detail:{fileDataUrl,text:n,fileType:t}});document.dispatchEvent(d),document.getElementById("dropZoneSVG").classList.remove("hidden"),i();var a=document.getElementById("suggestions");a&&a.classList.add("hidden")}else e?n||(window.displayStatus("Please Enter a prompt relating to the upload","success"),setTimeout((function(){window.hideStatus("success")}),3e3)):(window.displayStatus("Please select a file!","success"),setTimeout((function(){window.hideStatus("success")}),3e3))}a.addEventListener("click",(function(){n.classList.remove("hidden")})),document.getElementById("closeFileEModal").addEventListener("click",(function(e){e.stopPropagation(),i()})),n.addEventListener("click",(function(e){"dropZoneModal"===e.target.id&&n.classList.add("hidden")})),e.addEventListener("change",(function(e){l(e.target.files)})),t.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault(),e.target.closest("#dropZone")&&(e.dataTransfer.dropEffect="copy")}),!1),t.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),e.target.closest("#dropZone")&&l(e.dataTransfer.files)}),!1),t.addEventListener("click",(function(t){"modalTrigger"===t.target.id||t.target.closest("#modalTrigger")||(t.stopPropagation(),t.preventDefault(),t.target.closest("#dropZone")&&e.click())})),s.addEventListener("click",(function(e){e.preventDefault(),r()})),s.addEventListener("keydown",(function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),userInput.textContent.trim()&&(o.textContent="",o.style.height="auto",o.style.height=Math.min(userInput.scrollHeight,28*window.innerHeight/100)+"px",o.scrollTop=userInput.scrollHeight,r()))})),window.submitImageAndText=r,window.CloseFileModal=i})();
//# sourceMappingURL=packed_fileHandler.js.map