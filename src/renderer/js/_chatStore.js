/*! For license information please see _chatStore.js.LICENSE.txt */
(()=>{function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=n(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){l=!0,i=t},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw i}}}}function n(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(){"use strict";a=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",u=c.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var o=e&&e.prototype instanceof w?e:w,a=Object.create(o.prototype),c=new O(r||[]);return i(a,"_invoke",{value:H(t,n,c)}),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h="suspendedStart",v="suspendedYield",g="executing",m="completed",y={};function w(){}function b(){}function x(){}var k={};d(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(I([])));E&&E!==n&&r.call(E,l)&&(k=E);var L=x.prototype=w.prototype=Object.create(k);function M(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(a,i,c,l){var s=p(t[a],t,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==o(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,c,l)}),(function(t){n("throw",t,c,l)})):e.resolve(d).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,l)}))}l(s.arg)}var a;i(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function H(e,n,r){var o=h;return function(a,i){if(o===g)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=T(c,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var s=p(e,n,r);if("normal"===s.type){if(o=r.done?m:v,s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=m,r.method="throw",r.arg=s.arg)}}}function T(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=p(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function V(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(V,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(o(e)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=d(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},M(j.prototype),d(j.prototype,s,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new j(f(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},M(L),d(L,u,"Generator"),d(L,l,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}function l(t,e,n,r,o,a,i){try{var c=t[a](i),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){l(a,r,o,i,c,"next",t)}function c(t){l(a,r,o,i,c,"throw",t)}i(void 0)}))}}var u=window.electron.joinPath(window.electron.home_dir(),".quickai/.quickai.store"),d=document.getElementById("chatArea"),f=document.getElementById("conversations");escapeHTML=window.escapeHTML;var p,h=document.getElementById("renameModal"),v=document.getElementById("modalTitle"),g=document.getElementById("newName"),m=document.getElementById("renameButton"),y=document.getElementById("cancelButton");function w(){return(w=s(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u){t.next=11;break}return t.prev=1,t.next=4,window.electron.mkdir(u);case 4:t.sent||console.log("Error creating directory",u),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Error checking or creating directory:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}var b=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storagePath=e},e=[{key:"saveConversation",value:(r=s(a().mark((function t(e,n){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(this.storagePath,"/").concat(n,".json"),t.prev=1,t.next=4,window.electron.write(r,e);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error("Error saving conversation:",t.t0);case 9:case"end":return t.stop()}}),t,this,[[1,6]])}))),function(t,e){return r.apply(this,arguments)})},{key:"loadConversation",value:(n=s(a().mark((function t(e){var n,r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="".concat(this.storagePath,"/").concat(e,".json"),t.prev=1,!window.electron.stat(n)){t.next=8;break}return r=e.startsWith("V")?"Vision":"text",t.next=6,window.electron.read(n,r);case 6:return o=t.sent,t.abrupt("return",[o,r]);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.error("Error loading conversation:",t.t0);case 13:return t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,this,[[1,10]])}))),function(t){return n.apply(this,arguments)})},{key:"addMessage",value:function(t,e){var n,r,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=[];"vision"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text")?(l=a?[{type:"text",text:e},(n={type:i},r=i,o={url:a},(r=c(r))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n)]:[{type:"text",text:e}],window.electron.addToVisionChat({role:t,content:l})):(l=[{type:"text",text:e}],window.electron.addToChat({role:t,content:l}))}},{key:"renderConversation",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";d.innerHTML="",document.getElementById("mode").value="Vision"===n?"Vision":"Basic mode",t.forEach((function(r){"user"===r.role?e.renderUserMessage(r.content,n):"assistant"===r.role&&("vision"===n.toLocaleLowerCase()?e.renderVisionAssistantMessage(r.content):e.renderTextAssistantMessage(r.content)),window.electron.CreateNew(t,n)})),window.implementUserCopy(),window.copyBMan(),window.addCopyListeners(),!1===check&&(window.electron.send("toMain",{message:"set-Utitility-Script"}),check=!0)}},{key:"getFileType",value:function(t){try{var e={image_url:"image",file_url:"document"},n=t.find((function(t){return"image_url"===t.type||"file_url"===t.type}));return console.log(null==n?void 0:n.type),n&&e[n.type]?e[n.type]:(console.log("No file attachment!"),null)}catch(t){return"TypeError"===t.name?console.log("No file attachment!"):console.error("Error determining file type:",t.name),null}}},{key:"getFileUrl",value:function(t){try{var e=t.find((function(t){return"image_url"===t.type}));return e&&e.images?e.images.map((function(t){return t.url})):[]}catch(t){return console.error("Error extracting file URL:",t),[]}}},{key:"getMessageType",value:function(t){return t.find((function(t){return"image_url"===t.type||"file_url"===t.type}))?"vision":"text"}},{key:"renderUserMessage",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",r="msg_".concat(Math.random().toString(34).substring(3,9)),o="copy-button-".concat(Math.random().toString(36).substring(5,9)),a=this.getFileType(t),i=null;a&&(i=this.getFileUrl(t));var c=document.createElement("div");c.className="flex justify-end mb-4",e="vision"===n.toLocaleLowerCase()?"]"===t[0].text.slice(-1)?t[0].text.substring(0,t[0].text.length-22):t[0].text:"]"===t.slice(-1)?t.substring(0,t.length-22):t;var l='\n        <div data-id="'.concat(r,'" class="').concat(r,' relative bg-blue-500 dark:bg-[#142384] text-black dark:text-white rounded-lg p-2 md:p-3 shadow-md w-fit max-w-full lg:max-w-5xl">\n            <p class="whitespace-pre-wrap break-words max-w-xl md:max-w-2xl lg:max-w-3xl">').concat(escapeHTML(e),'</p>\n            <button id="').concat(o,'" class="user-copy-button absolute rounded-md px-2 py-2 right-1 bottom-0.5 bg-gradient-to-r from-indigo-400 to-pink-400 dark:from-gray-700 dark:to-gray-900 hover:bg-indigo-200 dark:hover:bg-gray-600 text-white dark:text-gray-100 rounded-lg font-semibold border border-2 cursor-pointer opacity-40 hover:opacity-80" onclick="CopyAll(\'.').concat(r,"', this)\">\n            Copy\n            </button>\n        </div>\n        ");if(i){var s="FCont_".concat(Math.random().toString(35).substring(2,8)),u='\n      <div id="'.concat(s,'" class="flex justify-end">\n        <article class="flex flex-rows-1 md:flex-rows-3 bg-cyan-100 w-fit p-1 rounded-lg">\n        ').concat(i&&"image"===a?i.map((function(t){return'<img src="'.concat(t,'" alt="Uploaded Image" class="rounded-md w-14 h-14 my-auto mx-1" />')})).join(""):"document"===a?i.map((function(t){return'<div class="inline-flex items-center"><svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n          <path stroke-linecap="round" stroke-linejoin="round" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 16V4a2 2 0 0 1 2 2v12a2 2 0 0 0-2-2zm1-1h4v10h-4V4z"/></svg><span>'.concat(t,"</span></div>")})).join(""):"","\n        </article>\n      </div>\n      "),f=document.createElement("div");f.className="flex justify-end",f.innerHTML=u,d.appendChild(f)}c.innerHTML=l,d.appendChild(c)}},{key:"renderTextAssistantMessage",value:function(t){var e="msg_".concat(Math.random().toString(30).substring(3,9)),n=document.createElement("div");n.classList.add("flex","justify-start","mb-12","overflow-wrap"),d.appendChild(n),n.innerHTML='\n    <section class="relative w-fit max-w-full lg:max-w-6xl mb-8">\n        <div class="'.concat(e,' bg-gray-200 text-gray-800 dark:bg-[#28185a] dark:text-white rounded-lg px-4 mb-6 pt-2 pb-4 w-fit max-w-full lg:max-w-6xl">').concat(window.marked(t),'\n        </div>\n        <section class="options flex absolute bottom-0 left-0 space-x-4 cursor-pointer">\n            <div class="opacity-70 hover:opacity-100 p-1 border-none" id="exportButton" onclick="toggleExportOptions(this);" title="Export">\n                <svg class="fill-rose-700 dark:fill-gray-700 text-gray-600 bg-white w-6 h-6 rounded-full" viewBox="0 0 24 24">\n                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>\n                </svg>\n            </div>\n            <div class="rounded-lg p-1 opacity-70 cursor-pointer" aria-label="Copy" title="Copy" id="copy-all" onclick="CopyAll(\'.').concat(e,'\');">\n            <svg id="copy-svg-').concat(e,'" class="w-5 md:w-6 h-5 md:h-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path class="fill-black dark:fill-pink-300" fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z"></path>\n            </svg>\n            </div>\n        </section>\n\n        <div id="exportOptions" class="hidden block absolute bottom-6 left-0 bg-white dark:bg-gray-800 p-2 rounded shadow-md z-50 transition-300">\n\n            <ul class="list-none p-0">\n                <li class="mb-2">\n                <a href=""  class="text-blue-500 dark:text-blue-400" onclick="HTML2Pdf(event, \'.').concat(e,'\')">1. Export to PDF</svg></a>\n                </li>\n                <li class="mb-2">\n                    <a href=""  class="text-blue-500 dark:text-blue-400" onclick="HTML2Jpg(event, \'.').concat(e,'\')">2. Export to JPG</a>\n                </li>\n                <li>\n                    <a href="" class="text-blue-500 dark:text-blue-400" onclick="HTML2Word(event, \'.').concat(e,'\')">3. Export to DOCX</a>\n                </li>\n                <li>\n                    <a href="" class="text-blue-500 dark:text-blue-400 decoration-underline" onclick="SuperHTML2Word(event, \'.').concat(e,"')\">4. Word Export Advance</a>\n                </li>\n            </ul>\n        </div>\n    </section>\n    ")}},{key:"renderVisionAssistantMessage",value:function(t){var e="msg_".concat(Math.random().toString(30).substring(3,9)),n=document.createElement("div");n.classList.add("flex","justify-start","mb-12","overflow-wrap"),d.appendChild(n),n.innerHTML='\n        <section class="relative w-fit max-w-full lg:max-w-6xl mb-8">\n          <div class="'.concat(e,' bg-gray-200 text-gray-800 dark:bg-[#28185a] dark:text-white rounded-lg px-4 mb-6 pt-2 pb-4 w-fit max-w-full lg:max-w-6xl">').concat(marked(t[0].text),'</p>\n          </div>\n          <section class="options flex absolute bottom-0 left-0 space-x-4 cursor-pointer">\n            <div class="opacity-70 hover:opacity-100 p-1" id="exportButton" onclick="toggleExportOptions(this);" title="Export">\n              <svg class="fill-rose-700 dark:fill-gray-700 text-gray-600 bg-white w-6 h-6 rounded-full" viewBox="0 0 24 24">\n                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>\n              </svg>\n            </div>\n            <div class="rounded-lg p-1 opacity-70 cursor-pointer" aria-label="Copy" title="Copy" id="copy-all" onclick="CopyAll(\'.').concat(e,'\');">\n              <svg id="copy-svg-').concat(e,'"\n                class="w-5 md:w-6 h-5 md:h-6 cursor-pointer"\n                viewBox="0 0 24 24"\n                fill="none"\n                xmlns="http://www.w3.org/2000/svg">\n                \x3c!-- path content remains the same --\x3e\n                <path\n                  class="fill-black dark:fill-pink-300 transition duration-300 ease-in-out fill-opacity-40 hover:fill-opacity-100"\n                  fill-rule="evenodd"\n                  clip-rule="evenodd"\n                  d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z"\n                />\n                \x3c!-- Circle for visual feedback --\x3e\n                <circle class="h-2 w-2 absolute -top-2 -left-2 bg-blue-500 opacity-0 fill-opacity-0" r="1" />\n              </svg>\n            </div>\n          </section>\n          <div id="exportOptions" class="hidden block absolute bottom-6 left-0 bg-white dark:bg-gray-800 p-2 rounded shadow-md z-50 transition-300">\n\n            <ul class="list-none p-0">\n                <li class="mb-2">\n                    <a href="" class="text-blue-500 dark:text-blue-400" onclick="HTML2Pdf(event, \'.').concat(e,'\')">1. Export to PDF</a>\n                </li>\n                <li class="mb-2">\n                    <a href="" class="text-blue-500 dark:text-blue-400" onclick="HTML2Jpg(event, \'.').concat(e,'\')">2. Export to JPG</a>\n                </li>\n                <li>\n                    <a href="" class="text-blue-500 dark:text-blue-400" onclick="HTML2Word(event, \'.').concat(e,'\')">3. Export to DOCX</a>\n                </li>\n                <li>\n                    <a href="" class="text-blue-500 dark:text-blue-400 decoration-underline" onclick="SuperHTML2Word(event, \'.').concat(e,"')\">4. Word Export Advance</a>\n                </li>\n            </ul>\n          </div>\n          </section>")}}],e&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}(),x=new b(u);function k(){return C.apply(this,arguments)}function C(){return(C=s(a().mark((function n(){var r,o,i,c,l;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f.innerHTML='<div class="justify-center items-center">\n  <p class="text-center text-rose-400 dark:text-slate-400 text-md font-semibold">Empty!</p>\n  </div>\n  ',n.prev=1,n.next=4,window.electron.readDir(u);case 4:if(!((r=n.sent).length>0)){n.next=26;break}f.innerHTML="",o=["bg-amber-500","bg-rose-900","bg-teal-700","bg-red-500","bg-blue-500","bg-green-600","bg-yellow-800","bg-purple-500","bg-fuchsia-500"],i=e(r.entries()),n.prev=9,l=a().mark((function e(){var n,r,i,l,s,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t(c.value,2),r=n[0],i=n[1],".json"===window.electron.getExt(i)&&(l=window.electron.getBasename(i,".json"),s=document.createElement("div"),d=r<=o.length-1?o[r]:o[Math.floor(Math.random()*o.length)],s.classList.add("p-2",d,"transition-transform","text-black","tranform","hover:scale-105","transition","duration-600","ease-in-out","scale-100","infinite","hover:bg-blue-800","decoration-underline","decoration-pink-400","dark:decoration-fuchsia-500","dark:hover:bg-cyan-700","cursor-pointer","rounded-lg","space-y-2","w-full","sm:w-[90%]","md:w-[80%]","lg:w-[90%]","whitespace-nowrap","max-w-full","overflow-auto","scrollbar-hide"),s.setAttribute("data-text",l),s.textContent=l,s.onclick=function(){return E(s,l)},f.appendChild(s),s.addEventListener("contextmenu",(function(t){t.preventDefault();var e=document.getElementById("chatOptions-overlay"),n=document.getElementById("renameBt");e.classList.remove("hidden"),document.getElementById("CornfirmDelete").addEventListener("click",(function(){window.electron.deleteChat(u,l)&&(window.showDeletionStatus("text-red-400","Deleted ".concat(l)),console.log("Deleted ".concat(l))),document.getElementById("chatOptions-overlay").classList.add("hidden"),document.getElementById("confirm-modal").classList.add("hidden"),k()})),n.addEventListener("click",(function(){e.classList.add("hidden"),selectedItem=t,v.textContent="Rename ".concat(s.getAttribute("data-text")),h.classList.remove("hidden"),m.addEventListener("click",(function(){try{var t="".concat(l[0],"-").concat(g.value.trim());s&&""!==g.value.trim()&&window.electron.Rename(u,l,t)&&(s.textContent=t,s.setAttribute("data-text",t),h.classList.add("hidden")),k()}catch(t){console.log("Failed to rename file",t)}})),y.addEventListener("click",(function(){h.classList.add("hidden")})),h.addEventListener("click",(function(t){t.target===h&&h.classList.add("hidden")})),g.addEventListener("keypress",(function(t){t.stopPropagation(),"Enter"===t.key&&m.click()}))}))})));case 2:case"end":return e.stop()}}),e)})),i.s();case 12:if((c=i.n()).done){n.next=16;break}return n.delegateYield(l(),"t0",14);case 14:n.next=12;break;case 16:n.next=21;break;case 18:n.prev=18,n.t1=n.catch(9),i.e(n.t1);case 21:return n.prev=21,i.f(),n.finish(21);case 24:n.next=27;break;case 26:console.log("No conversations saved!");case 27:n.next=32;break;case 29:n.prev=29,n.t2=n.catch(1),console.error("Error reading conversation files:",n.t2);case 32:case"end":return n.stop()}}),n,null,[[1,29],[9,18,21,24]])})))).apply(this,arguments)}function E(t,e){return L.apply(this,arguments)}function L(){return(L=s(a().mark((function e(n,r){var o,i,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p&&p.classList.remove("animate-heartpulse"),p=n,n.classList.add("animate-heartpulse"),e.next=5,x.loadConversation(r);case 5:o=e.sent,i=t(o,2),c=i[0],l=i[1],c?(window.electron.setSuperCId(r),x.renderConversation(c,l)):alert("Conversation ".concat(r," not found."));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.electron.receive("fromMain-ToChat",(function(t){var e=t;try{var n=window.electron.getSuperCId()||window.electron.getNewChatUUId();console.log("ChatUpdated::"),e.length>1&&(x.saveConversation(e,n),console.log("Saved conversation, size:",e.length))}catch(t){console.log("Outer loop error:",t)}})),window.electron.receive("fromMain-ToVision",(function(t){console.log("Vision");try{var e=t,n=window.electron.getSuperCId()||window.electron.getNewVisionUUId();console.log("VChatUpdated::"),e&&e.length>1?(x.saveConversation(e,n),console.log("Saved V conversation, size:",e.length)):"object"===o(e)&&Object.keys(e).length>1?x.saveConversation(e,n):console.log("VChat is not an array or object with more than one entry.")}catch(t){console.error("Error in VChatUpdated handler:",t)}})),function(){w.apply(this,arguments)}(),k(),document.addEventListener("NewConversationOpened",(function(){k()}))})();
//# sourceMappingURL=_chatStore.js.map