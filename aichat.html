<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat Interaction</title>
    <link rel="stylesheet" href="src/renderer/css/aichat.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/default.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.2/katex.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.12.1/polyfill.min.js"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<script>
window.MathJax = {
    tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)'], ['[', ']']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
        }
};
//hljs.highlightAll();
</script>
<body class="bg-gradient-to-b from-indigo-200 via-purple-300 to-blue-200 dark:from-slate-700 dark:to-slate-700 min-h-screen font-sans flex flex-col items-center overflow-x-hidden">

    <!-- Main Container -->
    <div class="h-[100vh] w-[100vw] max-h-[100vh]  max-w-[100vw] p-6 mt-0 bg-white bg-opacity-90 rounded-b-none shadow-lg dark:bg-slate-800 rounded-t-none">
        <!-- Header -->
        <header class="mb-4">
            <article class="flex flex-rows-1 justify-between">
            <span>
                ðŸŒŸ
                <select id="mode" class="rounded-lg p-2 font-semibold text-sky-900 dark:text-gray-50 rounded-md bg-gradient-to-tr from-purple-300 to-violet-300 dark:from-gray-700 dark:to-gray-900 hover:from-cyan-400 hover:to-violet-400 dark:hover:from-gray-600 dark:hover:to-gray-800 focus:outline-none focus:ring-2 focus:ring-cyan-500 dark:focus:ring-gray-400">
                    <option default class="bg-gray-600">General mode</option>
                    <option class="bg-gray-600">Coding mode</option>
                </select>
            </span>
            <label class="relative inline-flex items-center cursor-pointer my-2 lg:ml-[24vw]" title="Change image generation model to FLUX">
                <input id="CModel" type="checkbox" class="checkbox sr-only peer mr-2 mt-1 h-4 w-4">
                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                <span class="hidden md:flex text-gray-700 overflow-ellipsis bg-gradient-to-r from-cyan-400 via-blue-400 to-pink-400 bg-clip-text">Use Flux</span>
            </label>
            <svg id="settings" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-8 w-8 fill-current text-gray-800 dark:text-gray-200 transition-colors duration-200">
                <path d="M19.14 12.936c.06-.437.06-.874 0-1.31l2.007-1.55c.21-.16.27-.44.14-.67l-2.4-4.155c-.12-.21-.36-.29-.57-.21l-2.337 1.017c-.56-.43-1.17-.79-1.83-1.07l-.354-2.6c-.04-.26-.27-.46-.54-.46h-5c-.27 0-.51.2-.54.46l-.354 2.6c-.66.28-1.28.64-1.83 1.07L5.22 5.89c-.21-.08-.45 0-.57.21l-2.4 4.155c-.12.21-.07.51.14.67l2.007 1.55c-.06.437-.06.874 0 1.31l-2.007 1.55c-.21.16-.27.44-.14.67l2.4 4.155c.12.21.36.29.57.21l2.337-1.017c.56.43 1.17.79 1.83 1.07l.354 2.6c.04.26.27.46.54.46h5c.27 0 .51-.2.54-.46l.354-2.6c.66-.28 1.28-.64 1.83-1.07l2.337-1.017c.21-.08.45 0 .57.21l2.4 4.155c.12.21.07.51-.14.67l-2.007 1.55c.06.437.06.874 0 1.31zM12 16a4 4 0 110-8 4 4 0 010 8z"/>
            </svg>
            </article>
        </header>

        <!-- Chat Area -->
        <section id="chatArea" class="bg-gray-100 dark:bg-slate-900 h-[75vh] p-2 md:p-4 rounded-lg shadow-inner  dark:shadow-gray-950 overflow-y-auto space-y-4">
                <!-- Quick query options -->
            <section id='suggestions' class="mx-auto">
                <div class="justify-center mt-[var(--screen-optical-compact-offset-amount)] flex h-full flex-shrink flex-col items-center overflow-hidden text-token-text-primary" style="opacity: 1; will-change: auto;">
                    <div class="relative inline-flex justify-center text-center text-2xl font-semibold leading-9 dark:text-white">
                        <h1>What can I help with? </h1><h1 class="result-streaming absolute left-full transition-opacity" style="opacity: 0;"><span></span></h1>
                    </div>
                    <div class="h-[116px]" style="opacity: 1; will-change: auto;"><div class="mt-5 flex items-center justify-center gap-x-2 transition-opacity xl:gap-x-2.5 opacity-100 flex-wrap">
                            <ul class="relative flex items-stretch gap-x-2 gap-y-4 overflow-hidden py-2 sm:gap-y-2 xl:gap-x-2.5 xl:gap-y-2.5 flex-wrap justify-center">
                                <li style="opacity: 1; will-change: auto; transform: none;">
                                    <button class="group relative flex h-[42px] items-center gap-1.5 rounded-full border border-token-border-light px-3 py-2 text-start text-[13px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed xl:gap-2 xl:text-[14px]"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-md" style="color: rgb(53, 174, 71);"><path d="M4.5 17.5L7.56881 14.3817C8.32655 13.6117 9.55878 13.5826 10.352 14.316L16.5 20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19 12H18.3798C17.504 12 16.672 11.6173 16.102 10.9524L11.898 6.04763C11.328 5.38269 10.496 5 9.6202 5H6C4.89543 5 4 5.89543 4 7V18C4 19.1046 4.89543 20 6 20H18C19.1046 20 20 19.1046 20 18V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19 5H18.3798C17.504 5 16.672 5.38269 16.102 6.04763L14 8.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="8.5" cy="9.5" r="1.5" fill="currentColor"></circle><path d="M18 14V10C18 9.58798 18.4704 9.35279 18.8 9.6L21.4667 11.6C21.7333 11.8 21.7333 12.2 21.4667 12.4L18.8 14.4C18.4704 14.6472 18 14.412 18 14Z" fill="currentColor"></path><path d="M18 7V3C18 2.58798 18.4704 2.35279 18.8 2.6L21.4667 4.6C21.7333 4.8 21.7333 5.2 21.4667 5.4L18.8 7.4C18.4704 7.64721 18 7.41202 18 7Z" fill="currentColor"></path></svg><span class="max-w-full select-none whitespace-nowrap text-gray-600 transition group-hover:text-token-text-primary dark:text-gray-500">Create image</span></button>
                                </li>
                                <li style="opacity: 1; will-change: auto; transform: none;">
                                    <button class="group relative flex h-[42px] items-center gap-1.5 rounded-full border border-token-border-light px-3 py-2 text-start text-[13px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed xl:gap-2 xl:text-[14px]"><svg width="26" height="24" viewBox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-md" style="color: rgb(118, 208, 235);"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.4544 4.10451C13.1689 3.95886 12.8309 3.95886 12.5455 4.10451L2.98609 8.98175L2.07715 7.20022L11.6365 2.32298C12.493 1.88603 13.5069 1.88603 14.3634 2.32298L23.9227 7.20022C24.7332 7.61373 25.091 8.44008 24.9999 9.2194V15C24.9999 15.5523 24.5522 16 23.9999 16C23.4477 16 22.9999 15.5523 22.9999 15V11.2156L20.9666 12.2115V16.3052C20.9666 17.409 20.3605 18.4237 19.3885 18.9468L14.4219 21.6203C13.5341 22.0981 12.4657 22.0981 11.578 21.6203L6.61135 18.9468C5.63941 18.4237 5.03328 17.409 5.03328 16.3052V12.2115L2.10635 10.7779C0.626202 10.0529 0.609039 7.94926 2.07715 7.20022L2.98608 8.98175L12.5601 13.671C12.8376 13.807 13.1623 13.807 13.4398 13.671L23 8.9885C23.0001 8.98394 23.0001 8.97938 23.0003 8.97483L13.4544 4.10451ZM7.03328 13.1911V16.3052C7.03328 16.6732 7.23532 17.0114 7.5593 17.1858L12.526 19.8592C12.8219 20.0185 13.178 20.0185 13.4739 19.8592L18.4406 17.1858C18.7646 17.0114 18.9666 16.6732 18.9666 16.3052V13.1911L14.3195 15.4672C13.4871 15.8749 12.5128 15.8749 11.6803 15.4672L7.03328 13.1911Z" fill="currentColor"></path></svg><span class="max-w-full select-none whitespace-nowrap text-gray-600 transition group-hover:text-token-text-primary dark:text-gray-500">Get advice</span></button>
                                </li>
                                <li style="opacity: 1; will-change: auto; transform: none;">
                                    <button class="group relative flex h-[42px] items-center gap-1.5 rounded-full border border-token-border-light px-3 py-2 text-start text-[13px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed xl:gap-2 xl:text-[14px]"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-md" style="color: rgb(234, 132, 68);"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 5C4 3.34315 5.34315 2 7 2H14.1716C14.9672 2 15.7303 2.31607 16.2929 2.87868L19.1213 5.70711C19.6839 6.26972 20 7.03278 20 7.82843V19C20 20.6569 18.6569 22 17 22H7C5.34315 22 4 20.6569 4 19V5ZM7 4C6.44772 4 6 4.44772 6 5V19C6 19.5523 6.44772 20 7 20H17C17.5523 20 18 19.5523 18 19V7.82843C18 7.56321 17.8946 7.30886 17.7071 7.12132L14.8787 4.29289C14.6911 4.10536 14.4368 4 14.1716 4H7ZM8 10C8 9.44772 8.44772 9 9 9H15C15.5523 9 16 9.44772 16 10C16 10.5523 15.5523 11 15 11H9C8.44772 11 8 10.5523 8 10ZM8 14C8 13.4477 8.44772 13 9 13H13C13.5523 13 14 13.4477 14 14C14 14.5523 13.5523 15 13 15H9C8.44772 15 8 14.5523 8 14Z" fill="currentColor"></path></svg><span class="max-w-full select-none whitespace-nowrap text-gray-600 transition group-hover:text-token-text-primary dark:text-gray-500">Summarize text</span></button>
                                </li>
                                <li style="opacity: 1; will-change: auto; transform: none;">
                                    <button class="group relative flex h-[42px] items-center gap-1.5 rounded-full border border-token-border-light px-3 py-2 text-start text-[13px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed xl:gap-2 xl:text-[14px]"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-md" style="color: rgb(118, 208, 235);"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.9969 3.39017C14.5497 2.17402 15.961 1.60735 17.2013 2.10349L19.4044 2.98475C20.7337 3.51645 21.3458 5.05369 20.7459 6.35358L19.0629 10H20C20.5523 10 21 10.4477 21 11V19C21 20.6569 19.6569 22 18 22H6C4.34315 22 3 20.6569 3 19V11C3 10.4504 3.44331 10.0044 3.99183 10L3.84325 9.89871C3.83307 9.89177 3.82303 9.88465 3.81311 9.87733C2.55917 8.9526 2.79737 7.01262 4.23778 6.41871L6.35774 5.5446L7.08184 3.36883C7.57382 1.8905 9.49246 1.51755 10.5024 2.70393L11.9888 4.45002L13.5103 4.46084L13.9969 3.39017ZM15.5096 4.89554C16.2552 5.48975 16.5372 6.59381 15.9713 7.51403L14.8266 9.37513C14.8265 9.38763 14.8266 9.40262 14.8273 9.42012C14.8294 9.47125 14.8357 9.52793 14.8451 9.58262C14.8548 9.63855 14.8654 9.67875 14.8714 9.69773C14.9032 9.79819 14.9184 9.89994 14.9184 10H16.8602L18.93 5.51547C19.0499 5.25549 18.9275 4.94804 18.6617 4.8417L16.4585 3.96044C16.2105 3.86122 15.9282 3.97455 15.8176 4.21778L15.5096 4.89554ZM12.8885 10C12.8572 9.84122 12.8358 9.66998 12.8289 9.50115C12.8194 9.26483 12.8254 8.81125 13.0664 8.41953L14.2677 6.46628L11.9746 6.44997C11.3934 6.44584 10.8427 6.18905 10.4659 5.74646L8.97951 4.00037L8.25541 6.17614C8.07187 6.72765 7.65748 7.17203 7.12012 7.39359L5.00091 8.26739L7.06338 9.67378C7.19188 9.7614 7.29353 9.87369 7.3663 10H12.8885ZM5 12V19C5 19.5523 5.44772 20 6 20H18C18.5523 20 19 19.5523 19 19V12H5ZM9.5 14.5C9.5 13.9477 9.94771 13.5 10.5 13.5H13.5C14.0523 13.5 14.5 13.9477 14.5 14.5C14.5 15.0523 14.0523 15.5 13.5 15.5H10.5C9.94771 15.5 9.5 15.0523 9.5 14.5Z" fill="currentColor"></path></svg><span class="max-w-full select-none whitespace-nowrap text-gray-600 transition group-hover:text-token-text-primary dark:text-gray-500">Surprise me</span></button>
                                </li>
                                <div class="inline-block" style="opacity: 1; will-change: auto; transform: none;">
                                    <button class="group relative flex h-[42px] items-center gap-1.5 rounded-full border border-token-border-light px-3 py-2 text-start text-[13px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed xl:gap-2 xl:text-[14px]"><span class="max-w-full select-none whitespace-nowrap text-gray-600 transition group-hover:text-token-text-primary dark:text-gray-500">More</span></button>
                                </div>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
        </section>

       <!-- Message Input Section -->
        <div class="fixed flex left-0 lg:left-auto items-end w-full lg:items-center lg:justify-center z-50 bottom-[1%]">
            <section class="w-full lg:w-[80vw] flex space-x-4 z-50">
                <section class="relative w-full p-2 border dark:border-black dark:bg-gray-700 rounded-lg">
                    <textarea id="userInput"
                        oninput="this.style.height = 'auto'; this.style.height = (this.scrollHeight) + 'px';" cols="10"
                        class="w-full rows-10 scrollbar-hide resize-none overflow-wrap p-1 md:p-3 max-h-[15vh] border border-gray-400 dark:border-none rounded-lg focus:outline-none dark:outline-sky-600 focus:ring-2 focus:ring-purple-500 dark:focus:ring-gray-900 dark:ring-1 dark:bg-gray-800 dark:text-white"
                        autofocus
                        placeholder="Message QuickAi ðŸ’« To generate an image, start with `/image`" aria-label="Message input"></textarea>
                    <button
                        id="sendBtn"
                        class="absolute right-2 bottom-2 md:bottom-5 opacity-50 hover:opacity-90 px-4 py-3 md:px-6 md:py-5 bg-gradient-to-r from-blue-600 to-purple-600 dark:from-sky-600 dark:to-purple-800 text-white rounded-full hover:from-blue-700 hover:to-purple-700 transition ease-in-out duration-200 dark:border dark:border-blue-400 dark:shadow dark:shadow-cyan-200 z-60"
                        aria-label="Send message" title="Send message">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </section>
            </section>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="errorContainer" class="hidden fixed flex items-center justify-center z-50 p-4" role="alert" aria-modal="true">
        <div class="bg-rose-400 dark:bg-rose-900 bg-opacity-70 dark:bg-opacity-50 max-w-md lg:max-w-lg rounded-lg shadow-lg border border-yellow-300 dark:border-gray-900 text-red-900 dark:text-red-500 p-6 relative">
            <button id="closeEModal" class="absolute top-1 right-1 text-gray-400 dark:text-gray-500 hover:text-white dark:hover:text-gray-400" aria-label="Close">
                <svg class="fill-current h-6 w-6" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                    <path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.65-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/>
                </svg>
            </button>
            <p id="errorArea" class="block sm:inline"></p>
            <button id="retry" class="block sm:inline text-gray-400 dark:text-zinc-500 hover:text-violet-600 dark:hover:text-teal-600" aria-label="Retry">
                <svg class="fill-current h-6 w-6" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm4-9.5L12 10l-4-4.5L8 6l4 5 5-4.5L19 6z"/>
                </svg>
            </button>
        </div>
    </div>

        <!-- Modal Background -->
    <div id="settingsModal" class="hidden fixed inset-2 z-50 flex items-center justify-center bg-black bg-opacity-50 dark:bg-gray-900 dark:bg-opacity-50">
        <!-- Modal Content -->
        <div class="relative bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full mx-2 md:mx-auto max-w-md">
            <!-- Close Button -->
            <button id="closeModal" class="absolute top-2 right-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
            </button>

            <!-- Modal Title -->
            <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-4">Settings</h2>

            <!-- Theme Switching Option -->
            <div class="flex items-center mb-4">
            <label for="themeSwitch" class="mr-3 text-gray-700 dark:text-gray-300">Dark Mode</label>
            <label class="relative inline-flex items-center cursor-pointer">
                <input id="themeSwitch" type="checkbox" class="sr-only peer">
                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
            </label>
            </div>

            <!-- Additional Settings Options -->
            <div class="mb-4">
            <label class="block text-gray-700 dark:text-gray-300 mb-2">Language</label>
            <select class="form-select w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500">
                <option value="en">English</option>
                <option value="fr">French</option>
                <option value="es">Spanish</option>
            </select>
            </div>

            <!-- Save Settings Button -->
            <button id="saveSettings" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400">
            Save Settings
            </button>
        </div>
    </div>
</body>
<script src="src/renderer/js/script.js"></script>
<script src="src/renderer/js/_aichat.js"></script>
</html>
